

;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2011 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-327F-7274-B7			    |
; |			       ESET spol. s r.o.			    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	9F8804CDBF96E214825417D2234EE8C5
; Input	CRC32 :	00AFCBE2

; File Name   :	D:\VStudio-Programme\VC2010\CMFResearch\PCMF_103.EXE
; Format      :	MS-DOS executable (EXE)
; Base Address:	1000h Range: 10000h-13540h Loaded length: 29E0h
; Entry	Point :	1000:3AC
; OS type	  :  MS	DOS
; Application type:  Executable	16bit

		.686p
		.mmx
		.model large

; ===========================================================================

; Segment type:	Pure code
seg000		segment	byte public 'CODE' use16
		assume cs:seg000
		assume es:nothing, ss:nothing, ds:dseg,	fs:nothing, gs:nothing
		db 10h dup(0)

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

ParseCmdLine	proc near		; CODE XREF: _main+1Ap

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	di
		push	si
		mov	dx, [bp+arg_0]
		mov	si, 1
		cmp	dx, si
		ja	short loc_10025
		jmp	loc_100D5
; ---------------------------------------------------------------------------

loc_10025:				; CODE XREF: ParseCmdLine+10j
		mov	[bp+var_6], si
		mov	ax, dx
		dec	ax
		mov	[bp+var_4], ax

loc_1002E:				; CODE XREF: ParseCmdLine+BFj
		mov	bx, [bp+arg_2]
		mov	si, [bx]
		push	si		; char *
		call	_strupr
		add	sp, 2
		cmp	byte ptr [si], '/'
		jnz	short loc_100AA
		inc	si
		mov	al, [si]
		sub	ah, ah
		sub	ax, 'Q'
		jz	short loc_10050	; /Q [quiet mode]
		dec	ax
		dec	ax
		jz	short loc_10058	; /S=A.EXE [execution command]
		jmp	short loc_100C6
; ---------------------------------------------------------------------------
		align 2

loc_10050:				; CODE XREF: ParseCmdLine+37j
		mov	QuietMode, 1
		jmp	short loc_100C6
; ---------------------------------------------------------------------------
		align 2

loc_10058:				; CODE XREF: ParseCmdLine+3Bj
		mov	[bp+var_2], si
		inc	[bp+var_2]
		mov	bx, [bp+var_2]
		cmp	byte ptr [bx], '='
		jnz	short loc_100A4
		inc	[bp+var_2]
		mov	si, offset ExecCommand
		push	ds
		pop	es
		assume es:dseg
		mov	di, [bp+var_2]
		mov	cx, 0FFFFh
		xor	ax, ax
		repne scasb
		not	cx
		sub	di, cx
		xchg	di, si
		shr	cx, 1
		rep movsw
		adc	cx, cx
		rep movsb
		mov	ax, offset ExecCommand
		push	ax
		call	sub_11EEC
		add	sp, 2
		cmp	ExecCommand, 0
		jnz	short loc_100C6
		mov	ax, 3

loc_1009A:				; CODE XREF: ParseCmdLine+97j
		push	ax		; int
		call	ShowError
		add	sp, 2
		jmp	short loc_100C6
; ---------------------------------------------------------------------------
		align 2

loc_100A4:				; CODE XREF: ParseCmdLine+54j
		mov	ax, 5
		jmp	short loc_1009A
; ---------------------------------------------------------------------------
		align 2

loc_100AA:				; CODE XREF: ParseCmdLine+2Dj
		mov	di, si
		mov	si, offset curFileName
		push	ds
		pop	es
		mov	cx, 0FFFFh
		xor	ax, ax
		repne scasb
		not	cx
		sub	di, cx
		xchg	di, si
		shr	cx, 1
		rep movsw
		adc	cx, cx
		rep movsb

loc_100C6:				; CODE XREF: ParseCmdLine+3Dj
					; ParseCmdLine+45j ...
		add	[bp+arg_2], 2
		dec	[bp+var_4]
		jz	short loc_100D2
		jmp	loc_1002E
; ---------------------------------------------------------------------------

loc_100D2:				; CODE XREF: ParseCmdLine+BDj
		mov	si, [bp+var_6]

loc_100D5:				; CODE XREF: ParseCmdLine+12j
		cmp	curFileName, 0
		jnz	short loc_100EA
		sub	si, si
		mov	ax, 1
		push	ax		; int
		call	ShowError
		add	sp, 2
		jmp	short loc_100F8
; ---------------------------------------------------------------------------

loc_100EA:				; CODE XREF: ParseCmdLine+CAj
		mov	ax, offset a_cmf ; ".CMF"
		push	ax
		mov	ax, offset curFileName
		push	ax		; char *
		call	AppendFileExt
		add	sp, 4

loc_100F8:				; CODE XREF: ParseCmdLine+D8j
		mov	ax, si
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
ParseCmdLine	endp


; =============== S U B	R O U T	I N E =======================================


ShowSplash	proc near		; CODE XREF: _main+24p
					; _main:ErrNoFMDRVp ...
		cmp	QuietMode, 0
		jnz	short locret_10125
		mov	ax, offset aCreativeMusicF ; "Creative Music File Player  Version 1.0"...
		push	ax		; char *
		call	_printf
		add	sp, 2
		mov	ax, offset aCopyrightCCrea ; "Copyright	(c) Creative Labs, Inc., 1990"...
		push	ax		; char *
		call	_printf
		add	sp, 2
		mov	ax, offset aCopyrightCCr_0 ; "Copyright	(c) Creative Technology	Pte L"...
		push	ax		; char *
		call	_printf
		add	sp, 2

locret_10125:				; CODE XREF: ShowSplash+5j
		retn
ShowSplash	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl main(int argc, const char	**argv,	const char **envp)
_main		proc near		; CODE XREF: start+B0p

argc		= word ptr  4
argv		= dword	ptr  6
envp		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+argc]
		cmp	si, 1
		jle	short ShowUsage
		call	FindFMDRV
		or	ax, ax
		jz	short ErrNoFMDRV
		mov	ax, word ptr [bp+argv]
		inc	ax
		inc	ax
		push	ax
		push	si
		call	ParseCmdLine
		add	sp, 4
		or	ax, ax
		jz	short loc_10194
		call	ShowSplash
		mov	ax, ' '
		push	ax
		mov	ax, offset curFileName
		push	ax
		call	FindFile
		add	sp, 4
		or	ax, ax
		jz	short loc_10186
		mov	ax, offset curFileName
		push	ax
		call	LoadFile
		add	sp, 2
		or	ax, ax
		jz	short loc_10170
		call	PlayFile

loc_10170:				; CODE XREF: _main+45j
		mov	ax, word ptr FileDataPtr+2
		or	ax, word ptr FileDataPtr
		jz	short loc_10194
		push	word ptr FileDataPtr+2 ; void *
		call	_free
		add	sp, 2
		jmp	short loc_10194
; ---------------------------------------------------------------------------
		align 2

loc_10186:				; CODE XREF: _main+37j
		mov	ax, offset curFileName
		push	ax		; char *
		mov	ax, 2
		push	ax		; int
		call	ShowError
		add	sp, 4

loc_10194:				; CODE XREF: _main+22j	_main+51j ...
		call	sub_12203
		pop	si
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------

ErrNoFMDRV:				; CODE XREF: _main+11j
		call	ShowSplash
		sub	ax, ax
		push	ax		; int
		call	ShowError
		jmp	short loc_101BC
; ---------------------------------------------------------------------------
		align 2

ShowUsage:				; CODE XREF: _main+Aj
		call	ShowSplash
		mov	ax, offset aUsagePlaycmfMu ; "Usage: PLAYCMF music-filename  [/Q] [/S"...
		push	ax		; char *
		call	_printf
		add	sp, 2
		mov	ax, offset aQSetQuietModeS ; "\n\t/Q :	  set quiet mode\n\t/S :    execu"...
		push	ax		; char *
		call	_printf

loc_101BC:				; CODE XREF: _main+7Fj
		add	sp, 2
		pop	si
		mov	sp, bp
		pop	bp
		retn
_main		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

LoadFile	proc near		; CODE XREF: _main+3Dp

var_A		= word ptr -0Ah
var_8		= word ptr -8
arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 0Ah
		push	di
		push	si
		mov	di, [bp+arg_0]
		sub	si, si
		push	di
		call	GetFileSize
		add	sp, 2
		add	ax, 0Fh
		mov	cl, 4
		shr	ax, cl
		push	ax
		call	malloc_seg
		add	sp, 2
		mov	[bp+var_A], ax
		mov	[bp+var_8], dx
		mov	word ptr FileDataPtr, ax
		mov	word ptr FileDataPtr+2,	dx
		or	dx, ax
		jz	short loc_1023C
		sub	ax, ax
		push	ax
		push	di
		call	fopen
		add	sp, 4
		or	ax, ax
		jnz	short loc_1020E
		mov	ax, 4
		push	ax		; int
		call	ShowError
		jmp	short loc_10239
; ---------------------------------------------------------------------------

loc_1020E:				; CODE XREF: LoadFile+3Fj
		mov	di, ax

loc_10210:				; CODE XREF: LoadFile+6Cj
		push	[bp+var_8]	; size_t
		push	[bp+var_A]	; size_t
		mov	ax, 8000h
		push	ax
		push	di		; void *
		call	_fread
		add	sp, 8
		mov	si, ax
		add	[bp+var_A], si
		jnz	short loc_1022C
		add	byte ptr [bp+var_8+1], 10h

loc_1022C:				; CODE XREF: LoadFile+62j
		cmp	si, 8000h
		jz	short loc_10210
		mov	si, 1
		push	di		; FILE *
		call	_fclose

loc_10239:				; CODE XREF: LoadFile+48j
		add	sp, 2

loc_1023C:				; CODE XREF: LoadFile+31j
		mov	ax, si
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
LoadFile	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

PlayFile	proc near		; CODE XREF: _main+47p

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 0Ch
		push	di
		push	si
		mov	ax, offset fmDrvMarker
		push	ds
		push	ax
		call	cmfSetMarkerPtr
		add	sp, 4
		mov	[bp+var_C], ax
		mov	[bp+var_A], dx
		call	cmfResetPlayer
		mov	ax, word ptr ds:loc_109A2
		mov	dx, word ptr FileDataPtr+2
		mov	si, ax
		mov	[bp+var_2], dx
		les	bx, FileDataPtr
		assume es:nothing
		push	word ptr es:[bx+24h]
		add	bx, es:[bx+6]
		push	es
		push	bx
		call	cmfSetTimbrePtr
		add	sp, 6
		mov	es, [bp+var_2]
		mov	ax, es:[si+0Ch]
		cwd
		push	dx
		push	ax
		mov	ax, 34DCh
		mov	dx, 12h
		push	dx
		push	ax
		mov	di, es
		call	__aNldiv
		push	ax
		call	cmfSetPlayerPeriod
		add	sp, 2
		mov	es, di
		mov	ax, es:[si+8]
		add	ax, word ptr FileDataPtr
		mov	dx, word ptr FileDataPtr+2
		push	dx
		push	ax
		call	sub_12172
		add	sp, 4
		cmp	ExecCommand, 0
		jnz	short loc_102BE
		jmp	loc_10344
; ---------------------------------------------------------------------------

loc_102BE:				; CODE XREF: PlayFile+75j
		mov	ax, offset ExecCommand
		push	ax		; char *
		call	_system
		add	sp, 2
		cmp	QuietMode, 0
		jnz	short loc_10344
		mov	ax, offset aReturnToPlaycm ; "Return to	PLAYCMF\n"
		push	ax		; char *
		call	_printf
		add	sp, 2
		jmp	short loc_10344
; ---------------------------------------------------------------------------
		align 2

loc_102DC:				; CODE XREF: PlayFile+105j
		call	_kbhit
		or	ax, ax
		jz	short loc_10344
		call	_getch
		mov	si, ax
		or	al, al
		jz	short loc_102F7
		sub	ah, ah
		push	ax		; int
		call	_toupper
		add	sp, 2
		mov	si, ax

loc_102F7:				; CODE XREF: PlayFile+A6j
		cmp	si, 1Bh
		jnz	short loc_10302
		call	cmfStopPlaying
		jmp	short loc_10344
; ---------------------------------------------------------------------------
		align 2

loc_10302:				; CODE XREF: PlayFile+B6j
		cmp	si, 'S'
		jnz	short loc_10344
		call	_tell_last
		mov	di, ax
		mov	[bp+var_2], dx
		mov	ax, offset aComspec ; "COMSPEC"
		push	ax		; char *
		call	_getenv
		add	sp, 2
		mov	si, ax
		or	si, si
		jz	short loc_1033A
		mov	ax, offset aTypeExitToRetu ; "Type \"EXIT\" to return to PLAYCMF\n"
		push	ax		; char *
		call	_printf
		add	sp, 2
		push	si		; char *
		call	_system
		add	sp, 2
		mov	ax, offset aReturnToPlaycm ; "Return to	PLAYCMF\n"
		push	ax		; char *
		call	_printf
		add	sp, 2

loc_1033A:				; CODE XREF: PlayFile+D9j
		push	[bp+var_2]
		push	di
		call	_seek_last
		add	sp, 4

loc_10344:				; CODE XREF: PlayFile+77j PlayFile+89j ...
		cmp	fmDrvMarker, 0
		jnz	short loc_102DC
		cmp	QuietMode, 0
		jnz	short loc_1035C
		mov	ax, offset aMusicStopped_ ; "Music stopped."
		push	ax		; char *
		call	_printf
		add	sp, 2

loc_1035C:				; CODE XREF: PlayFile+10Cj
		push	[bp+var_A]
		push	[bp+var_C]
		call	cmfSetMarkerPtr
		add	sp, 4
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
PlayFile	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl ShowError(int, char *)
ShowError	proc near		; CODE XREF: ParseCmdLine+8Bp
					; ParseCmdLine+D2p ...

var_52		= byte ptr -52h
arg_0		= word ptr  4
arg_2		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 52h
		push	si
		mov	si, [bp+arg_0]
		push	si
		mov	ax, offset aError6202d ; "Error	62%02d:	"
		push	ax		; char *
		call	_printf
		add	sp, 4
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2] ; char *
		shl	si, 1
		push	ErrorStrList[si]
		lea	ax, [bp+var_52]
		push	ax		; char *
		call	_sprintf
		add	sp, 8
		lea	ax, [bp+var_52]
		push	ax
		mov	ax, offset aS	; "%s\n"
		push	ax		; char *
		call	_printf
		add	sp, 4
		pop	si
		mov	sp, bp
		pop	bp
		retn
ShowError	endp

		assume ss:seg003, ds:nothing
; [000000B8 BYTES: COLLAPSED FUNCTION start. PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------

__cintDIV:
		mov	ax, word ptr cs:__dataseg
		mov	ds, ax
		mov	ax, 3
		mov	ss:off_1250E, 564h
; [00000021 BYTES: COLLAPSED CHUNK OF FUNCTION __fptrap. PRESS KEYPAD "+" TO EXPAND]
		db 0
; [000000CE BYTES: COLLAPSED FUNCTION __cinit. PRESS KEYPAD "+"	TO EXPAND]
; [00000007 BYTES: COLLAPSED FUNCTION _exit. PRESS KEYPAD "+" TO EXPAND]
; [0000007A BYTES: COLLAPSED FUNCTION __exit. PRESS KEYPAD "+" TO EXPAND]
; [0000002D BYTES: COLLAPSED FUNCTION __ctermsub. PRESS	KEYPAD "+" TO EXPAND]
; [0000000F BYTES: COLLAPSED FUNCTION sub_10612. PRESS KEYPAD "+" TO EXPAND]
; [00000013 BYTES: COLLAPSED FUNCTION sub_10621. PRESS KEYPAD "+" TO EXPAND]
; [00000020 BYTES: COLLAPSED FUNCTION __FF_MSGBANNER. PRESS KEYPAD "+" TO EXPAND]
; [00000006 BYTES: COLLAPSED FUNCTION __fptrap.	PRESS KEYPAD "+" TO EXPAND]
; [00000017 BYTES: COLLAPSED FUNCTION __aNchkstk. PRESS	KEYPAD "+" TO EXPAND]
		align 2
; [00000022 BYTES: COLLAPSED FUNCTION __nullcheck. PRESS KEYPAD	"+" TO EXPAND]
; [0000018E BYTES: COLLAPSED FUNCTION __setargv. PRESS KEYPAD "+" TO EXPAND]
; [0000007D BYTES: COLLAPSED FUNCTION __setenvp. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [0000002B BYTES: COLLAPSED FUNCTION __NMSG_TEXT. PRESS KEYPAD	"+" TO EXPAND]
; [00000035 BYTES: COLLAPSED FUNCTION __NMSG_WRITE. PRESS KEYPAD "+" TO	EXPAND]
; [00000023 BYTES: COLLAPSED FUNCTION __myalloc. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000008 BYTES: COLLAPSED CHUNK OF FUNCTION _access.	PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------

__dosreturn:
		jnb	short loc_10926
		push	ax
		call	sub_1094C
		pop	ax
		xor	ah, ah
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------
; [0000000D BYTES: COLLAPSED CHUNK OF FUNCTION __dospawn. PRESS	KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------

__maperror:
		xor	ah, ah
		call	sub_1094C
		retn

; =============== S U B	R O U T	I N E =======================================


sub_1094C	proc near		; CODE XREF: seg000:092Fp
					; __dospawn:loc_1093Bp	...
		mov	byte ptr word_12551, al
		or	ah, ah
		jnz	short loc_10975
		cmp	byte ptr word_1254E, 3
		jb	short loc_10966
		cmp	al, 22h	; '"'
		jnb	short loc_1096A
		cmp	al, 20h	; ' '
		jb	short loc_10966
		mov	al, 5
		jmp	short loc_1096C
; ---------------------------------------------------------------------------

loc_10966:				; CODE XREF: sub_1094C+Cj
					; sub_1094C+14j
		cmp	al, 13h
		jbe	short loc_1096C

loc_1096A:				; CODE XREF: sub_1094C+10j
		mov	al, 13h

loc_1096C:				; CODE XREF: sub_1094C+18j
					; sub_1094C+1Cj
		mov	bx, 2F4h
		xlat

loc_10970:				; CODE XREF: sub_1094C+2Bj
		cbw
		mov	word_12546, ax
		retn
; ---------------------------------------------------------------------------

loc_10975:				; CODE XREF: sub_1094C+5j
		mov	al, ah
		jmp	short loc_10970
sub_1094C	endp

; ---------------------------------------------------------------------------
		align 2
; [0000003C BYTES: COLLAPSED FUNCTION _printf. PRESS KEYPAD "+"	TO EXPAND]
; [000000E0 BYTES: COLLAPSED FUNCTION __flsbuf.	PRESS KEYPAD "+" TO EXPAND]
; [00000041 BYTES: COLLAPSED FUNCTION __getbuf.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000071 BYTES: COLLAPSED FUNCTION __stbuf. PRESS KEYPAD "+"	TO EXPAND]
; [0000003E BYTES: COLLAPSED FUNCTION __ftbuf. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000072 BYTES: COLLAPSED FUNCTION _fflush. PRESS KEYPAD "+"	TO EXPAND]
; [00000008 BYTES: COLLAPSED FUNCTION _flushall. PRESS KEYPAD "+" TO EXPAND]
; [00000049 BYTES: COLLAPSED FUNCTION flsall. PRESS KEYPAD "+" TO EXPAND]
		align 2
off_10C4C	dw offset loc_10CB2	; DATA XREF: __output+51r
		dw offset loc_10CBD
		dw offset loc_10CD1
		dw offset loc_10D05
		dw offset loc_10D31
		dw offset loc_10D39
		dw offset loc_10D62
		dw offset loc_10D94
; [0000040A BYTES: COLLAPSED FUNCTION __output.	PRESS KEYPAD "+" TO EXPAND]
; [00000008 BYTES: COLLAPSED FUNCTION sub_11066. PRESS KEYPAD "+" TO EXPAND]
; [0000000C BYTES: COLLAPSED FUNCTION sub_1106E. PRESS KEYPAD "+" TO EXPAND]
; [0000001D BYTES: COLLAPSED FUNCTION sub_1107A. PRESS KEYPAD "+" TO EXPAND]
; [00000029 BYTES: COLLAPSED FUNCTION sub_11097. PRESS KEYPAD "+" TO EXPAND]
; [0000001E BYTES: COLLAPSED FUNCTION sub_110C0. PRESS KEYPAD "+" TO EXPAND]
; [0000001C BYTES: COLLAPSED FUNCTION sub_110DE. PRESS KEYPAD "+" TO EXPAND]
; [00000031 BYTES: COLLAPSED FUNCTION sub_110FA. PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------
; [00000006 BYTES: COLLAPSED CHUNK OF FUNCTION __output. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [0000007A BYTES: COLLAPSED FUNCTION _lseek. PRESS KEYPAD "+" TO EXPAND]
; [000000B1 BYTES: COLLAPSED FUNCTION _write. PRESS KEYPAD "+" TO EXPAND]
; [00000058 BYTES: COLLAPSED FUNCTION sub_1125D. PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------
; [00000034 BYTES: COLLAPSED CHUNK OF FUNCTION _write. PRESS KEYPAD "+"	TO EXPAND]
		align 2

; =============== S U B	R O U T	I N E =======================================


sub_112EA	proc near		; CODE XREF: _write+5Dp
		pop	cx
		mov	ax, word_12580
		cmp	ax, sp
		jnb	short loc_112F8
		sub	ax, sp
		neg	ax

loc_112F6:				; CODE XREF: sub_112EA+10j
		jmp	cx
; ---------------------------------------------------------------------------

loc_112F8:				; CODE XREF: sub_112EA+6j
		xor	ax, ax
		jmp	short loc_112F6
sub_112EA	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: thunk

sub_112FC	proc near		; CODE XREF: __myalloc+Cp __getbuf+Bp	...
		jmp	sub_11325
sub_112FC	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================

; Attributes: thunk

sub_11300	proc near		; CODE XREF: __cenvarg+205p
					; comexebat+71p ...
		jmp	sub_11304
sub_11300	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11304	proc near		; CODE XREF: sub_11300j

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	bx, [bp+arg_0]
		mov	si, 282h
		cmp	[si+6],	bx
		jnb	short loc_11320
		dec	bx
		dec	bx
		or	byte ptr [bx], 1
		cmp	[si+8],	bx
		jbe	short loc_11320
		mov	[si+8],	bx

loc_11320:				; CODE XREF: sub_11304+Dj
					; sub_11304+17j
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_11304	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11325	proc near		; CODE XREF: sub_112FCj

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	cx, [bp+arg_0]
		cmp	cx, 0FFE8h
		ja	short loc_11344
		mov	bx, 282h
		call	__searchseg
		jnb	short loc_11349
		call	__growseg
		jb	short loc_11344
		call	__searchseg
		jnb	short loc_11349

loc_11344:				; CODE XREF: sub_11325+Bj
					; sub_11325+18j
		xor	ax, ax
		cwd
		jmp	short $+2

loc_11349:				; CODE XREF: sub_11325+13j
					; sub_11325+1Dj
		pop	di
		pop	si
		pop	bp
		retn
sub_11325	endp

; ---------------------------------------------------------------------------
		align 2
; [0000007C BYTES: COLLAPSED FUNCTION __searchseg. PRESS KEYPAD	"+" TO EXPAND]
; [0000008C BYTES: COLLAPSED FUNCTION __growseg. PRESS KEYPAD "+" TO EXPAND]
; [00000051 BYTES: COLLAPSED FUNCTION __incseg.	PRESS KEYPAD "+" TO EXPAND]
; [00000020 BYTES: COLLAPSED FUNCTION __findlast. PRESS	KEYPAD "+" TO EXPAND]
		align 2
; [0000003F BYTES: COLLAPSED FUNCTION _strcat. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000032 BYTES: COLLAPSED FUNCTION _strcpy. PRESS KEYPAD "+"	TO EXPAND]
; [0000001B BYTES: COLLAPSED FUNCTION _strlen. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [0000003A BYTES: COLLAPSED FUNCTION _strncmp.	PRESS KEYPAD "+" TO EXPAND]
; [0000000B BYTES: COLLAPSED FUNCTION __toupper. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000016 BYTES: COLLAPSED FUNCTION _toupper.	PRESS KEYPAD "+" TO EXPAND]
; [00000059 BYTES: COLLAPSED FUNCTION _getenv. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000056 BYTES: COLLAPSED FUNCTION _sprintf.	PRESS KEYPAD "+" TO EXPAND]
; [0000002A BYTES: COLLAPSED FUNCTION _strchr. PRESS KEYPAD "+"	TO EXPAND]
; [00000042 BYTES: COLLAPSED FUNCTION _stricmp.	PRESS KEYPAD "+" TO EXPAND]
; [0000002B BYTES: COLLAPSED FUNCTION _strrchr.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [0000001E BYTES: COLLAPSED FUNCTION _strupr. PRESS KEYPAD "+"	TO EXPAND]
; [0000004A BYTES: COLLAPSED FUNCTION __getpath. PRESS KEYPAD "+" TO EXPAND]
; [00000255 BYTES: COLLAPSED FUNCTION __cenvarg. PRESS KEYPAD "+" TO EXPAND]
		align 2
word_119B8	dw 0			; DATA XREF: __dospawn+6Cw
					; __dospawn+B5r
word_119BA	dw 0			; DATA XREF: __dospawn+67w
					; __dospawn+B0r
word_119BC	dw 0			; DATA XREF: __dospawn+76w
					; __dospawn+CBr
word_119BE	dw 0			; DATA XREF: __dospawn+7Ew
					; __dospawn+C3r
word_119C0	dw 0			; DATA XREF: __dospawn+83w
					; __dospawn+BEr
; [000000E8 BYTES: COLLAPSED FUNCTION __dospawn. PRESS KEYPAD "+" TO EXPAND]
; [0000007F BYTES: COLLAPSED FUNCTION comexebat. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000122 BYTES: COLLAPSED FUNCTION _spawnve.	PRESS KEYPAD "+" TO EXPAND]
; [00000142 BYTES: COLLAPSED FUNCTION _spawnvpe. PRESS KEYPAD "+" TO EXPAND]
; [0000008F BYTES: COLLAPSED FUNCTION _system. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000014 BYTES: COLLAPSED FUNCTION __execload. PRESS	KEYPAD "+" TO EXPAND]
; [0000001F BYTES: COLLAPSED FUNCTION _access. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [0000009A BYTES: COLLAPSED FUNCTION __aNldiv.	PRESS KEYPAD "+" TO EXPAND]

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11EEC	proc near		; CODE XREF: ParseCmdLine+7Ap

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	es
		push	di
		push	si
		mov	ax, ds
		mov	es, ax
		assume es:dseg
		mov	si, [bp+arg_0]
		mov	di, si

loc_11EFB:				; CODE XREF: sub_11EEC+16j
		lodsb
		or	al, al
		jz	short loc_11F04
		cmp	al, 20h	; ' '
		jz	short loc_11EFB

loc_11F04:				; CODE XREF: sub_11EEC+12j
					; sub_11EEC+1Ej
		stosb
		or	al, al
		jz	short loc_11F0C
		lodsb
		jmp	short loc_11F04
; ---------------------------------------------------------------------------

loc_11F0C:				; CODE XREF: sub_11EEC+1Bj
		mov	ax, [bp+arg_0]
		pop	si
		pop	di
		pop	es
		assume es:nothing
		pop	bp
		retn
sub_11EEC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

fopen		proc near		; CODE XREF: LoadFile+37p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	ax, [bp+arg_2]
		mov	ah, 3Dh
		mov	dx, [bp+arg_0]
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read, 1 -	write, 2 - read	& write
		jnb	short loc_11F2E
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_11F2E:				; CODE XREF: fopen+13j
		pop	bp
		retn
fopen		endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	ah, 3Ch	; '<'
		mov	cx, 20h	; ' '
		mov	dx, [bp+4]
		int	21h		; DOS -	2+ - CREATE A FILE WITH	HANDLE (CREAT)
					; CX = attributes for file
					; DS:DX	-> ASCIZ filename (may include drive and path)
		jnb	short loc_11F4A
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_11F4A:				; CODE XREF: seg000:1F43j
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; size_t __cdecl fread(void *, size_t, size_t, FILE *)
_fread		proc near		; CODE XREF: LoadFile+57p

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	bx, [bp+arg_0]
		mov	cx, [bp+arg_2]
		mov	ah, 3Fh	; '?'
		push	ds
		lds	dx, [bp+arg_4]
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		pop	ds
		jnb	short loc_11F6B
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_11F6B:				; CODE XREF: _fread+18j
		pop	bp
		retn
_fread		endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	bx, [bp+4]
		mov	cx, [bp+6]
		mov	ah, 40h	; '@'
		push	ds
		lds	dx, [bp+8]
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	ds
		jnb	short loc_11F8C
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_11F8C:				; CODE XREF: seg000:1F85j
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl fclose(FILE *)
_fclose		proc near		; CODE XREF: LoadFile+72p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	bx, [bp+arg_0]
		mov	ah, 3Eh
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		jnb	short loc_11FA3
		mov	FileNameToPlay,	ax

loc_11FA3:				; CODE XREF: _fclose+10j
		pop	bp
		retn
_fclose		endp

; ---------------------------------------------------------------------------
		align 2
		push	bp
		mov	bp, sp
		mov	ah, 48h
		mov	bx, [bp+4]
		mov	cx, 100h
		add	bx, 0Fh
		jb	short loc_11FC0
		shr	bx, 1
		shr	bx, 1
		shr	bx, 1
		shr	bx, 1
		mov	cx, bx

loc_11FC0:				; CODE XREF: seg000:1FB4j
		mov	bx, cx
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jnb	short loc_11FC8
		sub	ax, ax

loc_11FC8:				; CODE XREF: seg000:1FC4j
		mov	dx, ax
		sub	ax, ax
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

malloc_seg	proc near		; CODE XREF: LoadFile+1Cp

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	ah, 48h
		mov	bx, [bp+arg_0]
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jnb	short loc_11FDC
		sub	ax, ax

loc_11FDC:				; CODE XREF: malloc_seg+Aj
		mov	dx, ax
		sub	ax, ax
		pop	bp
		retn
malloc_seg	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __cdecl free(void *)
_free		proc near		; CODE XREF: _main+57p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	es
		mov	ah, 49h
		mov	es, [bp+arg_0]
		int	21h		; DOS -	2+ - FREE MEMORY
					; ES = segment address of area to be freed
		pop	es
		pop	bp
		retn
_free		endp

; ---------------------------------------------------------------------------
		mov	ah, 48h
		mov	bx, 0FFFFh
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		mov	ax, bx
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

FindFile	proc near		; CODE XREF: _main+2Fp	GetFileSize+26p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	ah, 4Eh	; 'N'
		mov	cx, [bp+arg_2]
		mov	dx, [bp+arg_0]
		int	21h		; DOS -	2+ - FIND FIRST	ASCIZ (FINDFIRST)
					; CX = search attributes
					; DS:DX	-> ASCIZ filespec
					; (drive, path,	and wildcards allowed)
		mov	cx, ax
		mov	ax, 1
		jnb	short loc_1201A
		mov	FileNameToPlay,	cx
		sub	ax, ax

loc_1201A:				; CODE XREF: FindFile+18j
		pop	bp
		retn
FindFile	endp


; =============== S U B	R O U T	I N E =======================================


_tell_last	proc near		; CODE XREF: PlayFile+C3p
					; GetFileSize+7p
		push	es
		mov	ah, 2Fh
		int	21h		; DOS -	GET DISK TRANSFER AREA ADDRESS
					; Return: ES:BX	-> DTA
		mov	dx, es
		mov	ax, bx
		pop	es
		retn
_tell_last	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_seek_last	proc near		; CODE XREF: PlayFile+FAp
					; GetFileSize+14p ...

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	ds
		lds	dx, [bp+arg_0]
		mov	ah, 1Ah
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		pop	ds
		pop	bp
		retn
_seek_last	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl AppendFileExt(char *)
AppendFileExt	proc near		; CODE XREF: ParseCmdLine+E2p

var_2		= dword	ptr -2
arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	di
		push	si
		mov	ax, 5Ch	; '\'
		push	ax
		push	word ptr [bp+arg_0] ; char *
		call	_strrchr
		add	sp, 4
		mov	word ptr [bp+var_2], ax
		or	ax, ax
		jnz	short loc_12058
		mov	ax, word ptr [bp+arg_0]
		mov	word ptr [bp+var_2], ax

loc_12058:				; CODE XREF: AppendFileExt+1Aj
		mov	ax, 2Eh	; '.'
		push	ax
		push	word ptr [bp+var_2] ; char *
		call	_strchr
		add	sp, 4
		mov	word ptr [bp+var_2], ax
		or	ax, ax
		jz	short loc_12074
		mov	bx, ax
		mov	byte ptr [bx], 0
		jmp	short loc_12083
; ---------------------------------------------------------------------------
		align 2

loc_12074:				; CODE XREF: AppendFileExt+34j
		sub	ax, ax
		push	ax
		push	word ptr [bp+arg_0] ; char *
		call	_strchr
		add	sp, 4
		mov	word ptr [bp+var_2], ax

loc_12083:				; CODE XREF: AppendFileExt+3Bj
		push	ds
		pop	es
		assume es:dseg
		mov	di, word ptr [bp+arg_0+2]
		mov	si, word ptr [bp+var_2]
		mov	cx, 0FFFFh
		xor	ax, ax
		repne scasb
		not	cx
		sub	di, cx
		xchg	di, si
		shr	cx, 1
		repne movsw
		adc	cx, cx
		repne movsb
		mov	ax, word ptr [bp+arg_0]
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
AppendFileExt	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================


GetFileSize	proc near		; CODE XREF: LoadFile+Ep
		push	bp
		sub	sp, 84h
		mov	bp, sp
		call	_tell_last
		mov	[bp+80h], ax
		mov	[bp+82h], dx
		push	ss
		push	bp
		call	_seek_last
		add	sp, 4
		sub	ax, ax
		mov	[bp+1Ah], ax
		mov	[bp+1Ch], ax
		push	word ptr [bp+88h]
		call	FindFile
		add	sp, 2
		push	word ptr [bp+82h]
		push	word ptr [bp+80h]
		call	_seek_last
		add	sp, 4
		mov	ax, [bp+1Ah]
		mov	dx, [bp+1Ch]
		add	sp, 84h
		pop	bp
		retn
GetFileSize	endp


; =============== S U B	R O U T	I N E =======================================


; int kbhit(void)
_kbhit		proc near		; CODE XREF: PlayFile:loc_102DCp
		mov	ah, 1
		int	16h		; KEYBOARD - CHECK BUFFER, DO NOT CLEAR
					; Return: ZF clear if character	in buffer
					; AH = scan code, AL = character
					; ZF set if no character in buffer
		jnz	short loc_120FA
		sub	ax, ax
		jmp	short locret_12101
; ---------------------------------------------------------------------------

loc_120FA:				; CODE XREF: _kbhit+4j
		or	ax, ax
		jnz	short locret_12101
		mov	ax, 0FFFFh

locret_12101:				; CODE XREF: _kbhit+8j	_kbhit+Cj
		retn
_kbhit		endp


; =============== S U B	R O U T	I N E =======================================


; int getch(void)
_getch		proc near		; CODE XREF: PlayFile+9Fp
		sub	ah, ah
		int	16h		; KEYBOARD - READ CHAR FROM BUFFER, WAIT IF EMPTY
					; Return: AH = scan code, AL = character
		retn
_getch		endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================


FindFMDRV	proc near		; CODE XREF: _main+Cp
		push	es
		mov	ax, 3580h

loc_1210C:				; CODE XREF: FindFMDRV+4Cj
		push	ax
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		pop	ax
		mov	bx, 103h
		cmp	word ptr es:[bx], 'MF'
		jnz	short loc_12150
		cmp	word ptr es:[bx+2], 'RD'
		jnz	short loc_12150
		cmp	word ptr es:[bx+4], 56h
		jnz	short loc_12150
		sub	ah, ah
		call	$+3
		pop	bx
		add	bx, 31h
		mov	cs:[bx], al
		push	ax
		mov	dx, seg	dseg
		mov	ax, offset fmDrvMarker
		mov	bx, 1
		call	CallFMDRV
		mov	cs:word_1215A, ax
		mov	cs:word_1215C, dx
		pop	ax
		jmp	short loc_12158
; ---------------------------------------------------------------------------
		align 2

loc_12150:				; CODE XREF: FindFMDRV+10j
					; FindFMDRV+18j ...
		inc	al
		cmp	al, 0C0h
		jb	short loc_1210C
		sub	ax, ax

loc_12158:				; CODE XREF: FindFMDRV+45j
		pop	es
		assume es:nothing
		retn
FindFMDRV	endp

; ---------------------------------------------------------------------------
word_1215A	dw 0			; DATA XREF: FindFMDRV+3Bw
					; sub_12203+Br
word_1215C	dw 0			; DATA XREF: FindFMDRV+3Fw
					; sub_12203+6r

; =============== S U B	R O U T	I N E =======================================


CallFMDRV	proc near		; CODE XREF: FindFMDRV+38p
					; cmfSetMarkerPtr+Cp ...
		int	80h
		retn
CallFMDRV	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfSetMarkerPtr	proc near		; CODE XREF: PlayFile+Dp PlayFile+11Ep

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	bx, 1
		call	CallFMDRV
		pop	bp
		retn
cmfSetMarkerPtr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12172	proc near		; CODE XREF: PlayFile+6Ap

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	bx, 6
		call	CallFMDRV
		pop	bp
		retn
sub_12172	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfSetTimbrePtr	proc near		; CODE XREF: PlayFile+36p

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	cx, [bp+arg_4]
		mov	bx, 2
		call	CallFMDRV
		pop	bp
		retn
cmfSetTimbrePtr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfResetPlayer	proc near		; CODE XREF: PlayFile+19p
		push	bp
		mov	bp, sp
		mov	bx, 8
		call	CallFMDRV
		pop	bp
		retn
cmfResetPlayer	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ax, [bp+4]
		mov	bx, 3
		call	CallFMDRV
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfSetPlayerPeriod proc	near		; CODE XREF: PlayFile+54p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_0]
		mov	bx, 4
		call	CallFMDRV
		pop	bp
		retn
cmfSetPlayerPeriod endp


; =============== S U B	R O U T	I N E =======================================


cmfStopPlaying	proc near		; CODE XREF: PlayFile+B8p
		mov	bx, 7
		call	CallFMDRV
		retn
cmfStopPlaying	endp

; ---------------------------------------------------------------------------
		mov	bx, 0
		call	CallFMDRV
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ax, [bp+4]
		mov	bx, 5
		call	CallFMDRV
		pop	bp
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	bx, 9
		call	CallFMDRV
		pop	bp
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	bx, 0Ah
		call	CallFMDRV
		pop	bp
		retn
; ---------------------------------------------------------------------------
		pushf
		sub	ax, ax
		cli
		cmp	byte ptr fmDrvMarker, 0
		jz	short loc_12201
		mov	al, 0FFh
		xchg	al, byte ptr fmDrvMarker

loc_12201:				; CODE XREF: seg000:21F9j
		popf
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12203	proc near		; CODE XREF: _main:loc_10194p
		push	bp
		mov	bp, sp
		mov	bx, 1
		mov	dx, cs:word_1215C
		mov	ax, cs:word_1215A
		call	CallFMDRV
		pop	bp
		retn
sub_12203	endp

; ---------------------------------------------------------------------------
		mov	bx, 0Ch
		call	CallFMDRV
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		push	es
		mov	cl, [bp+4]
		mov	ch, [bp+6]
		cmp	cl, 0
		jb	short loc_12243
		cmp	cl, 0Fh
		ja	short loc_12243
		mov	bx, 0Ch
		call	CallFMDRV
		xor	bx, bx
		mov	bl, cl
		add	bx, ax
		mov	es, dx
		mov	es:[bx], ch

loc_12243:				; CODE XREF: seg000:222Bj seg000:2230j
		pop	es
		pop	bp
		retn
; ---------------------------------------------------------------------------
		mov	bx, 0Dh
		call	CallFMDRV
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		push	di
		mov	ax, [bp+4]
		mov	dx, [bp+6]
		mov	cx, [bp+8]
		mov	di, [bp+0Ah]
		mov	bx, 0Eh
		call	CallFMDRV
		pop	di
		pop	bp
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ax, [bp+4]
		mov	bx, 0Fh
		call	CallFMDRV
		pop	bp
		retn
; ---------------------------------------------------------------------------
		align 10h
seg000		ends

; ===========================================================================

; Segment type:	Regular
seg001		segment	byte public 'UNK' use16
		assume cs:seg001
		assume es:nothing, ss:nothing, ds:dseg,	fs:nothing, gs:nothing
seg_12280	dw seg dseg		; DATA XREF: dseg:064Ao
		align 10h
seg001		ends

; ===========================================================================

; Segment type:	Pure data
dseg		segment	para public 'DATA' use16
		assume cs:dseg
		db    0
		db    0
word_12292	dw 0			; DATA XREF: start+6Bw
		align 8
aMsRunTimeLibra	db 'MS Run-Time Library - Copyright (c) 1990, Microsoft Corp'
		db  18h
		db    0
aSbfmdrvNotInst	db 'SBFMDRV not installed',0 ; DATA XREF: dseg:ErrorStrListo
aCreativeMusi_0	db 'Creative Music File not specified',0 ; DATA XREF: dseg:0224o
aSDoesNotExist	db '"%s" does not exist',0 ; DATA XREF: dseg:0226o
aInvalidExecuti	db 'invalid execution command',0 ; DATA XREF: dseg:0228o
aOpenFileError	db 'open file error',0  ; DATA XREF: dseg:022Ao
aEqualSignMissi	db 'equal sign missing',0 ; DATA XREF: dseg:022Co
a_cmf		db '.CMF',0             ; DATA XREF: ParseCmdLine:loc_100EAo
aCreativeMusicF	db 'Creative Music File Player  Version 1.03',0Ah,0
					; DATA XREF: ShowSplash+7o
aCopyrightCCrea	db 'Copyright (c) Creative Labs, Inc., 1990.  All rights reserved.',0Ah,0
					; DATA XREF: ShowSplash+11o
aCopyrightCCr_0	db 'Copyright (c) Creative Technology Pte Ltd, 1990.  All rights rese'
					; DATA XREF: ShowSplash+1Bo
		db 'rved.',0Ah
		db 0Ah,0
		db    0
aUsagePlaycmfMu	db 'Usage: PLAYCMF music-filename  [/Q] [/S="execution command"]',0Ah,0
					; DATA XREF: _main+85o
aQSetQuietModeS	db 0Ah			; DATA XREF: _main+8Fo
		db 9,'/Q :    set quiet mode',0Ah
		db 9,'/S :    execute the execution command specified.',0Ah,0
aReturnToPlaycm	db 'Return to PLAYCMF',0Ah,0 ; DATA XREF: PlayFile+8Bo
					; PlayFile+ECo
		db    0
ErrorStrList	dw offset aSbfmdrvNotInst ; DATA XREF: ShowError+1Dr
					; "SBFMDRV not installed"
		dw offset aCreativeMusi_0 ; "Creative Music File not specified"
		dw offset aSDoesNotExist ; "\"%s\" does	not exist"
		dw offset aInvalidExecuti ; "invalid execution command"
		dw offset aOpenFileError ; "open file error"
		dw offset aEqualSignMissi ; "equal sign	missing"
QuietMode	db 0			; DATA XREF: ParseCmdLine:loc_10050w
					; ShowSplashr ...
aComspec	db 'COMSPEC',0          ; DATA XREF: PlayFile+CBo
aTypeExitToRetu	db 'Type "EXIT" to return to PLAYCMF',0Ah,0 ; DATA XREF: PlayFile+DBo
aMusicStopped_	db 'Music stopped.',0   ; DATA XREF: PlayFile+10Eo
aError6202d	db 'Error 62%02d: ',0   ; DATA XREF: ShowError+Bo
aS		db '%s',0Ah,0           ; DATA XREF: ShowError+2Fo
		align 2
word_1250C	dw 0			; DATA XREF: start+64w
off_1250E	dw offset __exit	; DATA XREF: seg000:046Dw
					; __fptrap-1C5r
word_12510	dw 0			; DATA XREF: start+40w
		align 4
		db    5
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_1252A	dw 435Fh		; DATA XREF: __setenvp+53r
a_file_info	db '_FILE_INFO=',0
dword_12538	dd 0			; DATA XREF: __cinit+5w __ctermsub+Er	...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_12546	dw 0			; DATA XREF: sub_1094C+25w
					; __cenvarg+97w ...
		db    0
		db    0
		db    0
		db    0
word_1254C	dw 0			; DATA XREF: start+79w	__cinit+28r ...
word_1254E	dw 0			; DATA XREF: __setargv+8w sub_1094C+7r
		db    0
word_12551	dw 0			; DATA XREF: sub_1094Cw __cenvarg+9Dw	...
word_12553	dw 14h			; DATA XREF: _lseek+9r	_write+9r ...
		db  81h	; Å
		db  81h	; Å
		db  81h	; Å
		db    1
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; int argc
argc		dw 0			; DATA XREF: start+ACr	__setargv+C3w
; char **argv
argv		dw 0			; DATA XREF: start+A8r	__setargv+D6w
; char **word_1256D
word_1256D	dw 0			; DATA XREF: start+A4r	__setenvp+40w ...
word_1256F	dw 2E3h			; DATA XREF: __setargv+2Ew
					; __setargv+E4r
seg_12571	dw seg dseg		; DATA XREF: __setargv+1Bw
		align 2
word_12574	dw 0			; DATA XREF: __dospawn+A0w
					; __dospawn+D5w
byte_12576	db 0			; DATA XREF: __ctermsub+18r
byte_12577	db 0			; DATA XREF: __ctermsub+20r
dword_12578	dd 0			; DATA XREF: __ctermsub+23r
word_1257C	dw 0			; DATA XREF: __FF_MSGBANNER+Ar
					; __FF_MSGBANNER+11r
		db 0FFh
		db 0FFh
word_12580	dw 0BB0h		; DATA XREF: __aNchkstk+7r
					; sub_112EA+1r
word_12582	dw 0			; DATA XREF: __setargvw __setargv+18Ar
		db    0
		db  16h
		db    2
		db    2
		db  18h
		db  0Dh
		db    9
		db  0Ch
		db  0Ch
		db  0Ch
		db    7
		db    8
		db  16h
		db  16h
		db 0FFh
		db    2
		db  0Dh
		db  12h
		db    2
		db 0FFh
		db    0
		db    0
		db 0A2h	; ¢
		db    7
		db    0
		db    0
		db 0A2h	; ¢
		db    7
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    2
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    2
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  84h	; Ñ
		db    3
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    2
		db    4
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		db    0
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_126DA	dw 3A2h			; DATA XREF: flsall:loc_10C1Cr
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    6
		db    0
		db    0
		db    6
		db    0
		db    1
		db    0
		db    0
		db  10h
		db    0
		db    3
		db    6
		db    0
		db    6
		db    2
		db  10h
		db    4
		db  45h	; E
		db  45h	; E
		db  45h	; E
		db    5
		db    5
		db    5
		db    5
		db    5
		db  35h	; 5
		db  30h	; 0
		db    0
		db  50h	; P
		db    0
		db    0
		db    0
		db    0
		db  20h
		db  20h
		db  30h	; 0
		db  50h	; P
		db  58h	; X
		db    7
		db    8
		db    0
		db  30h	; 0
		db  30h	; 0
		db  30h	; 0
		db  57h	; W
		db  50h	; P
		db    7
		db    0
		db    0
		db  20h
		db  20h
		db    0
		db    0
		db    0
		db    0
		db    0
		db    8
		db  60h	; `
		db  60h	; `
		db  60h	; `
		db  60h	; `
		db  60h	; `
		db  60h	; `
		db    0
		db    0
		db  70h	; p
		db  70h	; p
		db  78h	; x
		db  78h	; x
		db  78h	; x
		db  78h	; x
		db    8
		db    7
		db    8
		db    0
		db    0
		db    7
		db    0
		db    8
		db    8
		db    8
		db    0
		db    0
		db    8
		db    0
		db    8
		db    0
		db    0
		db    8
aNull		db '(null)'
word_12741	dw 6			; DATA XREF: __output+1A6r
		align 2
word_12744	dw 2000h		; DATA XREF: __myalloc+6w
					; __myalloc+10w ...
off_12746	dw offset __fptrap	; DATA XREF: __output:loc_10EDBr
off_12748	dw offset __fptrap	; DATA XREF: __output+2ABr
		db  54h	; T
		db    6
off_1274C	dw offset __fptrap	; DATA XREF: __output+297r
		db  54h	; T
		db    6
off_12750	dw offset __fptrap	; DATA XREF: __output+275r
		align 8
		public __ctype
; unsigned __int8 _ctype[]
__ctype		db    0, 20h, 20h, 20h,	20h, 20h, 20h, 20h ; DATA XREF:	_toupper+6r
		db  20h, 20h, 28h, 28h,	28h, 28h, 28h, 20h
		db  20h, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h, 48h, 10h, 10h,	10h, 10h, 10h, 10h
		db  10h, 10h, 10h, 10h,	10h, 10h, 10h, 10h
		db  10h, 84h, 84h, 84h,	84h, 84h, 84h, 84h
		db  84h, 84h, 84h, 10h,	10h, 10h, 10h, 10h
		db  10h, 10h, 81h, 81h,	81h, 81h, 81h, 81h
		db    1,   1,	1,   1,	  1,   1,   1,	 1
		db    1,   1,	1,   1,	  1,   1,   1,	 1
		db    1,   1,	1,   1,	10h, 10h, 10h, 10h
		db  10h, 10h, 82h, 82h,	82h, 82h, 82h, 82h
		db    2,   2,	2,   2,	  2,   2,   2,	 2
		db    2,   2,	2,   2,	  2,   2,   2,	 2
		db    2,   2,	2,   2,	10h, 10h, 10h, 10h
		db  20h,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0
		align 2
aC		db '/c ',0
word_1285E	dw 0			; DATA XREF: __cenvarg:loc_117A1r
word_12860	dw 0			; DATA XREF: __dospawn+29w
word_12862	dw 0			; DATA XREF: __dospawn+2Fw
					; __dospawn+40r
word_12864	dw 0			; DATA XREF: __dospawn+32w
		dw offset unk_1286E
word_12868	dw 0			; DATA XREF: __dospawn+36w
		dw offset unk_1287E
word_1286C	dw 0			; DATA XREF: __dospawn+3Aw
unk_1286E	db    0			; DATA XREF: dseg:05D6o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_1287E	db    0			; DATA XREF: dseg:05DAo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
aComspec_0	db 'COMSPEC',0
a_bat		db '.bat',0             ; DATA XREF: dseg:off_128A6o
a_exe		db '.exe',0             ; DATA XREF: dseg:0618o
a_com		db '.com',0             ; DATA XREF: dseg:061Ao
		db    0
off_128A6	dw offset a_bat		; DATA XREF: _spawnve+64r
					; ".bat"
		dw offset a_exe		; ".exe"
		dw offset a_com		; ".com"
aPath		db 'PATH',0
		db '\',0
		db    0
aComspec_1	db 'COMSPEC',0
aC_0		db '/c',0
aCommand_com	db 'command.com',0
		db    0
fmDrvMarker	dw 0			; DATA XREF: PlayFile+8o
					; PlayFile:loc_10344r ...
word_128CE	dw 0			; DATA XREF: start+8Fr
word_128D0	dw 0			; DATA XREF: __fptrap-1D9r __exit+31r	...
off_128D2	dw offset locret_10463	; DATA XREF: __NMSG_WRITE+26r
					; _write+1Er ...
off_128D4	dw offset locret_10463	; DATA XREF: __fptrap-1CEr
off_128D6	dw offset locret_10463	; DATA XREF: __exit+39r
		db    0
		db    0
		dd seg_12280
		align 4
dword_128E0	dd 0			; DATA XREF: __cinit+19r __cinit+39r ...
dword_128E4	dd 0			; DATA XREF: __cinit+31r
unk_128E8	db    0			; DATA XREF: __cinit:loc_104DBr
		db    0
word_128EA	dw 0			; DATA XREF: __cinit+24w
		db 0FAh	; ˙
		db  0Bh
word_128EE	dw 0			; DATA XREF: __execloadr
aNmsg		db '<<NMSG>>',0
		align 2
aR6000StackOver	db 'R6000',0Dh,0Ah
		db '- stack overflow',0Dh,0Ah,0
		db    3
		db    0
aR6003IntegerDi	db 'R6003',0Dh,0Ah
		db '- integer divide by 0',0Dh,0Ah,0
		db    9
		db    0
aR6009NotEnough	db 'R6009',0Dh,0Ah
		db '- not enough space for environment',0Dh,0Ah,0
		db 0FCh	; ¸
		db    0
		db  0Dh
		db  0Ah
		db    0
		db 0FFh
		db    0
aRunTimeError	db 'run-time error ',0
		db    2
		db    0
aR6002FloatingP	db 'R6002',0Dh,0Ah
		db '- floating-point support not loaded',0Dh,0Ah,0
		db    1
		db    0
aR6001NullPoint	db 'R6001',0Dh,0Ah
		db '- null pointer assignment',0Dh,0Ah,0
		db 0FFh
		db 0FFh
		db 0FFh
		db 0FFh
word_129D2	dw 0FFFFh		; DATA XREF: _sprintf+36r _sprintf+3Aw
word_129D4	dw 0FFFFh		; DATA XREF: _sprintf+18w _sprintf+30w
word_129D6	dw 0FFFFh		; DATA XREF: _sprintf+10w
byte_129D8	db 0FFh			; DATA XREF: _sprintf+8w
		db 0FFh
		db 0FFh
		db 0FFh
		db 0FFh
		db 0FFh
		db 0FFh
		db 0FFh
curFileName	db ?			; DATA XREF: ParseCmdLine+9Co
					; ParseCmdLine:loc_100D5r ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
FileDataPtr	dd ?			; DATA XREF: _main+4Dr	LoadFile+28w ...
FileNameToPlay	dw ?			; DATA XREF: fopen+3w fopen+15w ...
ExecCommand	db ?			; DATA XREF: ParseCmdLine+59o
					; ParseCmdLine+76o ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
dseg		ends

; ===========================================================================

; Segment type:	Uninitialized
seg003		segment	byte stack 'STACK' use16
		assume cs:seg003
		assume es:nothing, ss:nothing, ds:dseg,	fs:nothing, gs:nothing
byte_12D40	db 800h	dup(?)
seg003		ends


		end start
