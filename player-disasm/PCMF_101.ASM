; ---------------------------------------------------------------------------

FILE		struc ;	(sizeof=0xC, standard type)
_ptr		dd ?			; offset
_cnt		dw ?
_base		dd ?			; offset
_flag		db ?
_file		db ?
FILE		ends


;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2011 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-327F-7274-B7			    |
; |			       ESET spol. s r.o.			    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	7B30F72F778851AF21A4356804AE2FCA
; Input	CRC32 :	61CB7C91

; File Name   :	D:\VStudio-Programme\VC2010\CMFResearch\player-disasm\PCMF_101.EXE
; Format      :	MS-DOS executable (EXE)
; Base Address:	1000h Range: 10000h-13AD0h Loaded length: 2D50h
; Entry	Point :	1000:3E2
; OS type	  :  MS	DOS
; Application type:  Executable	16bit

		.686p
		.mmx
		.model large

; ===========================================================================

; Segment type:	Pure code
seg000		segment	byte public 'CODE' use16
		assume cs:seg000
		assume es:nothing, ss:nothing, ds:dseg,	fs:nothing, gs:nothing
byte_10000	db 10h dup(0)

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

ParseCmdLine	proc near		; CODE XREF: _main+1Ap

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	di
		push	si
		mov	[bp+var_6], 1
		mov	[bp+var_4], 1
		cmp	[bp+arg_0], 1
		ja	short loc_1002B
		jmp	loc_100E1
; ---------------------------------------------------------------------------

loc_1002B:				; CODE XREF: ParseCmdLine+16j
		mov	ax, [bp+arg_0]
		add	ax, 0FFFFh
		mov	[bp+var_8], ax
		add	[bp+var_4], ax
		mov	di, [bp+arg_2]
		mov	si, [bp+var_2]

loc_1003D:				; CODE XREF: ParseCmdLine+C8j
		mov	si, [di]
		push	si		; char *
		call	_strupr
		add	sp, 2
		cmp	byte ptr [si], '/'
		jnz	short loc_100AE
		inc	si

loc_1004C:
		mov	al, [si]
		sub	ah, ah
		cmp	ax, 'Q'
		jz	short loc_100A6	; /Q [quiet mode]
		cmp	ax, 'S'
		jnz	short loc_100D0	; /S=A.EXE [execution command]
		inc	si

loc_1005B:
		cmp	byte ptr [si], '='
		jnz	short loc_100A0
		inc	si
		push	di
		push	si
		mov	di, si
		mov	si, offset ExecCommand
		mov	ax, ds
		mov	es, ax
		assume es:dseg
		mov	cx, 0FFFFh
		xor	ax, ax
		repne scasb
		not	cx
		sub	di, cx
		xchg	di, si
		mov	ax, di
		shr	cx, 1
		repne movsw
		adc	cx, cx
		repne movsb
		pop	si
		pop	di
		push	ax
		call	sub_1231E
		add	sp, 2
		cmp	byte ptr ExecCommand, 0
		jnz	short loc_100D0
		mov	ax, 3

loc_10096:				; CODE XREF: ParseCmdLine+93j
		push	ax		; int
		call	ShowError
		add	sp, 2
		jmp	short loc_100D0
; ---------------------------------------------------------------------------
		align 2

loc_100A0:				; CODE XREF: ParseCmdLine+4Ej
		mov	ax, 5
		jmp	short loc_10096
; ---------------------------------------------------------------------------
		align 2

loc_100A6:				; CODE XREF: ParseCmdLine+43j
		mov	byte ptr QuietMode, 1
		jmp	short loc_100D0
; ---------------------------------------------------------------------------
		align 2

loc_100AE:				; CODE XREF: ParseCmdLine+39j
		push	di
		push	si
		mov	di, si
		mov	si, offset curFileName
		mov	ax, ds
		mov	es, ax
		mov	cx, 0FFFFh
		xor	ax, ax
		repne scasb
		not	cx
		sub	di, cx
		xchg	di, si
		shr	cx, 1
		repne movsw
		adc	cx, cx
		repne movsb
		pop	si
		pop	di

loc_100D0:				; CODE XREF: ParseCmdLine+48j
					; ParseCmdLine+81j ...
		add	di, 2
		dec	[bp+var_8]
		jz	short loc_100DB
		jmp	loc_1003D
; ---------------------------------------------------------------------------

loc_100DB:				; CODE XREF: ParseCmdLine+C6j
		mov	[bp+arg_2], di
		mov	[bp+var_2], si

loc_100E1:				; CODE XREF: ParseCmdLine+18j
		cmp	byte ptr curFileName, 0
		jnz	short loc_100FA
		mov	[bp+var_6], 0
		mov	ax, 1
		push	ax		; int
		call	ShowError
		add	sp, 2
		jmp	short loc_10108
; ---------------------------------------------------------------------------
		align 2

loc_100FA:				; CODE XREF: ParseCmdLine+D6j
		mov	ax, offset a_cmf ; ".CMF"
		push	ax
		mov	ax, offset curFileName
		push	ax		; char *
		call	AppendFileExt
		add	sp, 4

loc_10108:				; CODE XREF: ParseCmdLine+E7j
		mov	ax, [bp+var_6]
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
ParseCmdLine	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================


ShowSplash	proc near		; CODE XREF: _main+24p
					; _main:ErrNoFMDRVp ...
		cmp	byte ptr QuietMode, 0
		jnz	short locret_10137
		mov	ax, offset aCreativeMusicF ; "Creative Music File Player  Version 1.0"...
		push	ax		; char *
		call	_printf
		add	sp, 2
		mov	ax, offset aCopyrightCCrea ; "Copyright	(c) Creative Labs, Inc., 1990"...
		push	ax		; char *
		call	_printf
		add	sp, 2
		mov	ax, offset aCopyrightCCr_0 ; "Copyright	(c) Creative Technology	Pte L"...
		push	ax		; char *
		call	_printf
		add	sp, 2

locret_10137:				; CODE XREF: ShowSplash+5j
		retn
ShowSplash	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl main(int argc, const char	**argv,	const char **envp)
_main		proc near		; CODE XREF: start+8Ep

argc		= word ptr  4
argv		= dword	ptr  6
envp		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+argc], 1
		jle	short ShowUsage
		call	FindFMDRV
		or	ax, ax
		jz	short ErrNoFMDRV
		mov	ax, word ptr [bp+argv]
		add	ax, 2
		push	ax		; push &argv[1]
		push	[bp+argc]
		call	ParseCmdLine
		add	sp, 4
		or	ax, ax
		jz	short loc_101A6
		call	ShowSplash
		mov	ax, ' '
		push	ax
		mov	ax, offset curFileName
		push	ax
		call	FindFile	; based	on the file name/wildcard, find	first file name
		add	sp, 4
		or	ax, ax
		jz	short loc_10198
		mov	ax, offset curFileName
		push	ax
		call	LoadFile
		add	sp, 2
		or	ax, ax
		jz	short loc_10182
		call	PlayFile

loc_10182:				; CODE XREF: _main+45j
		mov	ax, word ptr FileDataPtr
		or	ax, word ptr FileDataPtr+2
		jz	short loc_101A6
		push	word ptr FileDataPtr+2 ; void *
		call	_free
		add	sp, 2
		jmp	short loc_101A6
; ---------------------------------------------------------------------------
		align 2

loc_10198:				; CODE XREF: _main+37j
		mov	ax, offset curFileName
		push	ax		; char *
		mov	ax, 2
		push	ax		; int
		call	ShowError
		add	sp, 4

loc_101A6:				; CODE XREF: _main+22j	_main+51j ...
		call	UninitFMDRV
		pop	bp
		retn
; ---------------------------------------------------------------------------
		align 2

ErrNoFMDRV:				; CODE XREF: _main+Ej
		call	ShowSplash
		sub	ax, ax
		push	ax		; int
		call	ShowError
		jmp	short loc_101CC
; ---------------------------------------------------------------------------
		align 2

ShowUsage:				; CODE XREF: _main+7j
		call	ShowSplash
		mov	ax, offset aUsagePlaycmfMu ; "Usage: PLAYCMF music-filename  [/Q] [/S"...
		push	ax		; char *
		call	_printf
		add	sp, 2
		mov	ax, offset aQSetQuietModeS ; "\n\t/Q :	  set quiet mode\n\t/S :    execu"...
		push	ax		; char *
		call	_printf

loc_101CC:				; CODE XREF: _main+7Dj
		add	sp, 2
		pop	bp
		retn
_main		endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

LoadFile	proc near		; CODE XREF: _main+3Dp

var_E		= word ptr -0Eh
var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 0Eh
		push	di
		push	si
		push	[bp+arg_0]
		call	GetFileSize
		add	sp, 2
		mov	word ptr [bp+var_C+2], ax
		mov	[bp+var_8], dx
		add	ax, 0Fh
		adc	dx, 0
		mov	cl, 4

loc_101F1:				; CODE XREF: LoadFile+25j
		shr	dx, 1
		rcr	ax, 1
		dec	cl
		jnz	short loc_101F1
		push	ax
		call	malloc_seg
		add	sp, 2
		mov	[bp+var_6], ax
		mov	[bp+var_4], dx
		mov	word ptr FileDataPtr, ax
		mov	word ptr FileDataPtr+2,	dx
		or	dx, ax
		jz	short loc_10264
		sub	ax, ax
		push	ax
		push	[bp+arg_0]
		call	fopen
		add	sp, 4
		mov	word ptr [bp+var_C], ax
		or	ax, ax
		jz	short loc_1025A
		mov	di, [bp+var_4]

loc_10227:				; CODE XREF: LoadFile+77j
		push	[bp+var_4]	; size_t
		push	[bp+var_6]	; size_t
		mov	ax, 8000h
		push	ax
		push	word ptr [bp+var_C] ; void *
		call	_fread
		add	sp, 8
		mov	si, ax
		add	[bp+var_6], si
		jnz	short loc_10245
		add	di, 1000h

loc_10245:				; CODE XREF: LoadFile+6Dj
		cmp	si, 8000h
		jz	short loc_10227
		mov	[bp+var_4], di
		mov	[bp+var_2], si
		push	word ptr [bp+var_C] ; FILE *
		call	_fclose
		jmp	short loc_10261
; ---------------------------------------------------------------------------
		align 2

loc_1025A:				; CODE XREF: LoadFile+50j
		mov	ax, 4
		push	ax		; int
		call	ShowError

loc_10261:				; CODE XREF: LoadFile+85j
		add	sp, 2

loc_10264:				; CODE XREF: LoadFile+3Dj
		mov	ax, [bp+var_E]
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
LoadFile	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

PlayFile	proc near		; CODE XREF: _main+47p

var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6

		push	bp
		mov	bp, sp
		sub	sp, 14h
		mov	ax, offset fmDrvMarker
		push	ds
		push	ax
		call	cmfSetMarkerPtr
		add	sp, 4
		mov	[bp+var_14], ax
		mov	[bp+var_12], dx
		call	cmfResetPlayer
		mov	ax, word ptr FileDataPtr
		mov	dx, word ptr FileDataPtr+2
		mov	word ptr [bp+var_10], ax
		mov	word ptr [bp+var_10+2],	dx
		les	bx, [bp+var_10]
		assume es:nothing
		push	word ptr es:[bx+24h] ; Number of Timbres = UINT8 @ fileData[24h]
		mov	ax, es:[bx+6]	; Timbre Data Offset = UINT16 @	fileData[06h]
		add	ax, word ptr FileDataPtr
		push	dx
		push	ax
		call	cmfSetTimbrePtr
		add	sp, 6
		les	bx, [bp+var_10]
		mov	ax, es:[bx+0Ch]	; Ticks	per Second = UINT16 @ fileData[0Ch]
		cwd
		push	dx		; 2nd param = TicksPerSecond
		push	ax
		mov	ax, 34DCh
		mov	dx, 12h
		push	dx		; 1st param = 1193180 (1234DCh)
		push	ax
		call	__aNldiv	; AX = 1193180 / TicksPerSecond
		push	ax
		call	cmfSetPlayerPeriod
		add	sp, 2
		les	bx, [bp+var_10]
		mov	ax, es:[bx+8]	; Sequence Data	Offset = UINT16	@ fileData[08h]
		add	ax, word ptr FileDataPtr
		mov	dx, word ptr FileDataPtr+2
		push	dx
		push	ax
		call	cmfStartPlaying
		add	sp, 4
		cmp	byte ptr ExecCommand, 0
		jnz	short loc_102E9
		jmp	loc_10381
; ---------------------------------------------------------------------------

loc_102E9:				; CODE XREF: PlayFile+76j
		mov	ax, offset ExecCommand
		push	ax		; char *
		call	_system
		add	sp, 2
		cmp	byte ptr QuietMode, 0
		jz	short loc_102FD
		jmp	loc_10381
; ---------------------------------------------------------------------------

loc_102FD:				; CODE XREF: PlayFile+8Aj
		mov	ax, offset aReturnToPlaycm ; "Return to	PLAYCMF\n"
		push	ax		; char *
		call	_printf
		add	sp, 2
		jmp	short loc_10381
; ---------------------------------------------------------------------------
		align 2

loc_1030A:				; CODE XREF: PlayFile+118j
		call	_kbhit
		or	ax, ax
		jz	short loc_10381
		call	_getch
		mov	[bp+var_6], ax
		cmp	byte ptr [bp+var_6], 0
		jz	short loc_1032C
		mov	al, byte ptr [bp+var_6]
		sub	ah, ah
		push	ax		; int
		call	_toupper
		add	sp, 2
		mov	[bp+var_6], ax

loc_1032C:				; CODE XREF: PlayFile+ADj
		cmp	[bp+var_6], 1Bh	; pressed ESC key?
		jnz	short loc_10338	; yes -	stop playback
		call	cmfStopPlaying
		jmp	short loc_10381
; ---------------------------------------------------------------------------
		align 2

loc_10338:				; CODE XREF: PlayFile+C2j
		cmp	[bp+var_6], 'S'
		jnz	short loc_10381
		call	_tell_last	; pressed 'S' - start command prompt
		mov	word ptr [bp+var_C+2], ax
		mov	[bp+var_8], dx
		mov	ax, offset aComspec ; "COMSPEC"
		push	ax		; char *
		call	_getenv
		add	sp, 2
		mov	word ptr [bp+var_C], ax
		or	ax, ax
		jz	short loc_10375
		mov	ax, offset aTypeExitToRetu ; "Type \"EXIT\" to return to PLAYCMF\n"
		push	ax		; char *
		call	_printf
		add	sp, 2
		push	word ptr [bp+var_C] ; char *
		call	_system
		add	sp, 2
		mov	ax, offset aReturnedToPlay ; "Returned to PLAYCMF.\n"
		push	ax		; char *
		call	_printf
		add	sp, 2

loc_10375:				; CODE XREF: PlayFile+E8j
		push	[bp+var_8]
		push	word ptr [bp+var_C+2] ;	FILE *
		call	_seek_last
		add	sp, 4

loc_10381:				; CODE XREF: PlayFile+78j PlayFile+8Cj ...
		cmp	word ptr fmDrvMarker, 0
		jnz	short loc_1030A
		cmp	byte ptr QuietMode, 0
		jnz	short loc_10399
		mov	ax, offset aMusicStopped_ ; "Music stopped."
		push	ax		; char *
		call	_printf
		add	sp, 2

loc_10399:				; CODE XREF: PlayFile+11Fj
		push	[bp+var_12]
		push	[bp+var_14]
		call	cmfSetMarkerPtr
		mov	sp, bp
		pop	bp
		retn
PlayFile	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl ShowError(int, char *)
ShowError	proc near		; CODE XREF: ParseCmdLine+87p
					; ParseCmdLine+E1p ...

var_52		= byte ptr -52h
arg_0		= word ptr  4
arg_2		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 52h
		push	[bp+arg_0]
		mov	ax, offset aError6202d ; "Error	62%02d:	"
		push	ax		; char *
		call	_printf
		add	sp, 4
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2] ; char *
		mov	bx, [bp+arg_0]
		shl	bx, 1
		push	ErrorStrList[bx]
		lea	ax, [bp+var_52]
		push	ax		; char *
		call	_sprintf
		add	sp, 8
		lea	ax, [bp+var_52]
		push	ax
		mov	ax, offset aS	; "%s\n"
		push	ax		; char *
		call	_printf
		mov	sp, bp
		pop	bp
		retn
ShowError	endp

; ---------------------------------------------------------------------------
		align 2
		assume ss:seg002, ds:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

		public start
start		proc near
		mov	ah, 30h
		int	21h		; DOS -	GET DOS	VERSION
					; Return: AL = major version number (00h for DOS 1.x)
		cmp	al, 2
		jnb	short loc_103EC
		int	20h		; DOS -	PROGRAM	TERMINATION
					; returns to DOS--identical to INT 21/AH=00h
; ---------------------------------------------------------------------------

loc_103EC:				; CODE XREF: start+6j
		mov	di, seg	dseg
		mov	si, ds:2
		sub	si, di
		cmp	si, 1000h
		jb	short loc_103FE
		mov	si, 1000h

loc_103FE:				; CODE XREF: start+17j
		cli
		mov	ss, di
		assume ss:dseg
		add	sp, 0C8Eh
		sti
		jnb	short loc_10418
		push	ss
		pop	ds
		assume ds:dseg
		call	__FF_MSGBANNER
		xor	ax, ax
		push	ax
		call	__NMSG_WRITE
		mov	ax, 4CFFh
		int	21h		; DOS -	2+ - QUIT WITH EXIT CODE (EXIT)
					; AL = exit code
; ---------------------------------------------------------------------------

loc_10418:				; CODE XREF: start+24j
		and	sp, 0FFFEh
		mov	word ptr ss:off_12696, sp
		mov	word ptr ss:unk_12692, sp
		mov	ax, si
		mov	cl, 4
		shl	ax, cl
		dec	ax
		mov	word ptr ss:unk_12690, ax
		add	si, di
		mov	word_12642, si
		mov	bx, es
		sub	bx, si
		neg	bx
		mov	ah, 4Ah
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		mov	word ptr ss:unk_12707, ds
		push	ss
		pop	es
		assume es:dseg
		cld
		mov	di, 704h
		mov	cx, 0C90h
		sub	cx, di
		xor	ax, ax
		rep stosb
		push	ss
		pop	ds
		call	near ptr loc_10495+1
		push	ss
		pop	ds
		call	__setenvp
		call	__setargv
		xor	bp, bp
		push	word ptr unk_12728
		push	word ptr unk_12726 ; argv
		push	word ptr unk_12724 ; argc
		call	_main
		push	ax
		call	sub_1055A
; ---------------------------------------------------------------------------

__cintDIV:
		mov	ax, seg	dseg
		mov	ds, ax
		mov	ax, 3
		mov	ss:off_12694, 55Ah

__amsg_exit:				; CODE XREF: __fptrap+3j __chkstk+13j	...
		push	ax
		call	__FF_MSGBANNER
		call	__NMSG_WRITE
		mov	ax, 0FFh
		push	ax
		call	off_12694
start		endp ; sp-analysis failed


loc_10495:				; CODE XREF: start+75p
		add	[si-32D0h], dh
		and	[bp+di+0C9h], sp
		mov	ax, 3500h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	word ptr unk_126F5, bx
		mov	word ptr unk_126F7, es
		push	cs
		pop	ds
		assume ds:seg000
		mov	ax, 2500h
		mov	dx, 477h
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		push	ss
		pop	ds
		assume ds:dseg
		mov	cx, word ptr unk_12A16
		jcxz	short loc_104EA
		mov	es, word ptr unk_12707
		assume es:nothing
		mov	si, es:2Ch
		lds	ax, dword ptr unk_12A18
		mov	dx, ds
		xor	bx, bx
		call	dword ptr ss:unk_12A14
		jnb	short loc_104D9
		push	ss
		pop	ds
		jmp	__fptrap
; ---------------------------------------------------------------------------

loc_104D9:				; CODE XREF: seg000:04D2j
		lds	ax, dword ptr ss:unk_12A1C
		mov	dx, ds
		mov	bx, 3
		call	dword ptr ss:unk_12A14
		push	ss
		pop	ds

loc_104EA:				; CODE XREF: seg000:04BAj
		mov	es, word ptr unk_12707
		mov	cx, es:2Ch
		jcxz	short loc_1052B
		mov	es, cx
		xor	di, di

loc_104F9:				; CODE XREF: seg000:0512j
		cmp	byte ptr es:[di], 0
		jz	short loc_1052B
		mov	cx, 0Ch
		mov	si, 0A8h ; '®'
		repe cmpsb
		jz	short loc_10514
		mov	cx, 7FFFh
		xor	ax, ax
		repne scasb
		jnz	short loc_1052B
		jmp	short loc_104F9
; ---------------------------------------------------------------------------

loc_10514:				; CODE XREF: seg000:0507j
		push	es
		push	ds
		pop	es
		assume es:dseg
		pop	ds
		mov	si, di
		mov	di, 0D0h ; '–'
		lodsb
		cbw
		xchg	ax, cx

loc_10520:				; CODE XREF: seg000:0527j
		lodsb
		inc	al
		jz	short loc_10526
		dec	ax

loc_10526:				; CODE XREF: seg000:0523j
		stosb
		loop	loc_10520
		push	ss
		pop	ds

loc_1052B:				; CODE XREF: seg000:04F3j seg000:04FDj ...
		mov	bx, 4

loc_1052E:				; CODE XREF: seg000:0545j
		and	byte ptr [bx+0D0h], 0BFh
		mov	ax, 4400h
		int	21h		; DOS -	2+ - IOCTL - GET DEVICE	INFORMATION
					; BX = file or device handle
		jb	short loc_10544
		test	dl, 80h
		jz	short loc_10544
		or	byte ptr [bx+0D0h], 40h

loc_10544:				; CODE XREF: seg000:0538j seg000:053Dj
		dec	bx
		jns	short loc_1052E
		mov	si, 3E0h
		mov	di, 3E0h
		call	sub_105F2
		mov	si, 3E0h
		mov	di, 3E0h
		call	sub_105E3
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_1055A	proc near		; CODE XREF: start+92p
		push	bp
		mov	bp, sp
		mov	si, 72Ah
		mov	di, 72Ah
		call	sub_105E3
		mov	si, 3E0h
		mov	di, 3E2h
		call	sub_105E3
		jmp	short loc_10574
sub_1055A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_10571	proc near		; CODE XREF: start+AFp

arg_0		= word ptr  4

		push	bp
		mov	bp, sp

loc_10574:				; CODE XREF: sub_1055A+15j
		mov	si, 3E2h
		mov	di, 3E2h
		call	sub_105E3
		mov	si, 3E2h
		mov	di, 3E2h
		call	sub_105F2
		call	__nullcheck
		or	ax, ax
		jz	short loc_10598
		cmp	[bp+arg_0], 0
		jnz	short loc_10598
		mov	[bp+arg_0], 0FFh

loc_10598:				; CODE XREF: sub_10571+1Aj
					; sub_10571+20j
		mov	cx, 0Fh
		mov	bx, 5

loc_1059E:				; CODE XREF: sub_10571+39j
		test	byte ptr [bx+0D0h], 1
		jz	short loc_105A9
		mov	ah, 3Eh
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle

loc_105A9:				; CODE XREF: sub_10571+32j
		inc	bx
		loop	loc_1059E
		call	sub_105B6
		mov	ax, [bp+arg_0]
		mov	ah, 4Ch
		int	21h		; DOS -	2+ - QUIT WITH EXIT CODE (EXIT)
sub_10571	endp			; AL = exit code


; =============== S U B	R O U T	I N E =======================================


sub_105B6	proc near		; CODE XREF: sub_10571+3Bp
		mov	cx, word ptr unk_12A16
		jcxz	short loc_105C3
		mov	bx, 2
		call	dword ptr unk_12A14

loc_105C3:				; CODE XREF: sub_105B6+4j
		push	ds
		lds	dx, dword ptr unk_126F5
		mov	ax, 2500h
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		cmp	byte ptr unk_12732, 0
		jz	short locret_105E2
		push	ds
		mov	al, byte ptr unk_12733
		lds	dx, dword ptr unk_12734
		mov	ah, 25h
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds

locret_105E2:				; CODE XREF: sub_105B6+1Dj
		retn
sub_105B6	endp


; =============== S U B	R O U T	I N E =======================================


sub_105E3	proc near		; CODE XREF: seg000:0556p sub_1055A+9p ...
		cmp	si, di
		jnb	short locret_105F1
		dec	di
		dec	di
		mov	cx, [di]
		jcxz	short sub_105E3
		call	cx
		jmp	short sub_105E3
; ---------------------------------------------------------------------------

locret_105F1:				; CODE XREF: sub_105E3+2j
		retn
sub_105E3	endp


; =============== S U B	R O U T	I N E =======================================


sub_105F2	proc near		; CODE XREF: seg000:054Dp
					; sub_10571+12p ...
		cmp	si, di
		jnb	short locret_10604
		sub	di, 4
		mov	ax, [di]
		or	ax, [di+2]
		jz	short sub_105F2
		call	dword ptr [di]
		jmp	short sub_105F2
; ---------------------------------------------------------------------------

locret_10604:				; CODE XREF: sub_105F2+2j
		retn
sub_105F2	endp

; ---------------------------------------------------------------------------
		align 2
; [00000020 BYTES: COLLAPSED FUNCTION __FF_MSGBANNER. PRESS KEYPAD "+" TO EXPAND]
; [00000006 BYTES: COLLAPSED FUNCTION __fptrap.	PRESS KEYPAD "+" TO EXPAND]
; [00000016 BYTES: COLLAPSED FUNCTION __chkstk.	PRESS KEYPAD "+" TO EXPAND]
; [00000022 BYTES: COLLAPSED FUNCTION __nullcheck. PRESS KEYPAD	"+" TO EXPAND]
; [0000018E BYTES: COLLAPSED FUNCTION __setargv. PRESS KEYPAD "+" TO EXPAND]
; [00000066 BYTES: COLLAPSED FUNCTION __setenvp. PRESS KEYPAD "+" TO EXPAND]
; [0000002B BYTES: COLLAPSED FUNCTION __NMSG_TEXT. PRESS KEYPAD	"+" TO EXPAND]
; [00000029 BYTES: COLLAPSED FUNCTION __NMSG_WRITE. PRESS KEYPAD "+" TO	EXPAND]
; [00000042 BYTES: COLLAPSED FUNCTION __myalloc. PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------
; [00000008 BYTES: COLLAPSED CHUNK OF FUNCTION _access.	PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------

__dosreturn:
		jnb	short loc_108F0
		push	ax
		call	sub_10914
		pop	ax
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------
; [0000000D BYTES: COLLAPSED CHUNK OF FUNCTION __dospawn. PRESS	KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------

__maperror:
		xor	ah, ah
		call	sub_10914
		retn

; =============== S U B	R O U T	I N E =======================================


sub_10914	proc near		; CODE XREF: seg000:08F9p
					; __dospawn:loc_10903p	...
		mov	byte ptr unk_1270C, al
		or	ah, ah
		jnz	short loc_1093E
		cmp	byte ptr unk_12709, 3
		jb	short loc_1092F
		cmp	al, 22h	; '"'
		jnb	short loc_10933
		cmp	al, 20h	; ' '
		jb	short loc_1092F
		mov	al, 5
		jmp	short loc_10935
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_1092F:				; CODE XREF: sub_10914+Cj
					; sub_10914+14j
		cmp	al, 13h
		jbe	short loc_10935

loc_10933:				; CODE XREF: sub_10914+10j
		mov	al, 13h

loc_10935:				; CODE XREF: sub_10914+18j
					; sub_10914+1Dj
		mov	bx, 0FEh ; '˛'
		xlat

loc_10939:				; CODE XREF: sub_10914+2Cj
		cbw
		mov	word ptr unk_12701, ax
		retn
; ---------------------------------------------------------------------------

loc_1093E:				; CODE XREF: sub_10914+5j
		mov	al, ah
		jmp	short loc_10939
sub_10914	endp

; [00000032 BYTES: COLLAPSED FUNCTION _flushall. PRESS KEYPAD "+" TO EXPAND]
; [0000003C BYTES: COLLAPSED FUNCTION _printf. PRESS KEYPAD "+"	TO EXPAND]
; [00000195 BYTES: COLLAPSED FUNCTION __flsbuf.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [000000AE BYTES: COLLAPSED FUNCTION __stbuf. PRESS KEYPAD "+"	TO EXPAND]
; [0000008D BYTES: COLLAPSED FUNCTION __ftbuf. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000068 BYTES: COLLAPSED FUNCTION _fflush. PRESS KEYPAD "+"	TO EXPAND]
; [000002C3 BYTES: COLLAPSED FUNCTION __output.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000135 BYTES: COLLAPSED FUNCTION iprint. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [000000EE BYTES: COLLAPSED FUNCTION sprint. PRESS KEYPAD "+" TO EXPAND]
; [0000002F BYTES: COLLAPSED FUNCTION fprint. PRESS KEYPAD "+" TO EXPAND]
		add	sp, 0Ah
		cmp	word ptr [bp+4], 67h ; 'g'
		jz	short loc_11210
		cmp	word ptr [bp+4], 47h ; 'G'
		jnz	short loc_11229

loc_11210:				; CODE XREF: seg000:1208j
		cmp	word ptr unk_12D66, 0
		jnz	short loc_11229
		cmp	word ptr unk_12D64, 0
		jz	short loc_11229
		push	word ptr unk_12D56
		call	word ptr unk_1289A
		add	sp, 2

loc_11229:				; CODE XREF: seg000:120Ej seg000:1215j ...
		cmp	word ptr unk_12D66, 0
		jz	short loc_11242
		cmp	word ptr unk_12D64, 0
		jnz	short loc_11242
		push	word ptr unk_12D56
		call	word ptr unk_1289E
		add	sp, 2

loc_11242:				; CODE XREF: seg000:122Ej seg000:1235j
		add	word ptr unk_12D54, 8
		mov	word ptr unk_12D5A, 0
		mov	ax, word ptr unk_12D62
		or	ax, word ptr unk_12D48
		jz	short loc_1126A
		push	word ptr [bp-2]
		call	word ptr unk_128A0
		add	sp, 2
		or	ax, ax
		jz	short loc_1126A
		mov	ax, 1
		jmp	short loc_1126C
; ---------------------------------------------------------------------------
		align 2

loc_1126A:				; CODE XREF: seg000:1254j seg000:1262j
		sub	ax, ax

loc_1126C:				; CODE XREF: seg000:1267j
		push	ax
		call	_out
		mov	sp, bp
		pop	bp
		retn
; [00000041 BYTES: COLLAPSED FUNCTION _outc. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [0000005E BYTES: COLLAPSED FUNCTION putpad. PRESS KEYPAD "+" TO EXPAND]
; [00000068 BYTES: COLLAPSED FUNCTION putbuf. PRESS KEYPAD "+" TO EXPAND]
; [000000C5 BYTES: COLLAPSED FUNCTION _out. PRESS KEYPAD "+" TO	EXPAND]
		align 2
; [00000017 BYTES: COLLAPSED FUNCTION putsign. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000029 BYTES: COLLAPSED FUNCTION putprefix. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [0000007F BYTES: COLLAPSED FUNCTION getnum. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000029 BYTES: COLLAPSED FUNCTION flagchar.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [0000007A BYTES: COLLAPSED FUNCTION _lseek. PRESS KEYPAD "+" TO EXPAND]
; [000000A6 BYTES: COLLAPSED FUNCTION _write. PRESS KEYPAD "+" TO EXPAND]
; [0000004E BYTES: COLLAPSED FUNCTION sub_1164E. PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------
; [00000034 BYTES: COLLAPSED CHUNK OF FUNCTION _write. PRESS KEYPAD "+"	TO EXPAND]
; [00000012 BYTES: COLLAPSED FUNCTION _stackavail. PRESS KEYPAD	"+" TO EXPAND]
; [00000012 BYTES: COLLAPSED FUNCTION unknown_libname_1. PRESS KEYPAD "+" TO EXPAND]
; [00000046 BYTES: COLLAPSED FUNCTION unknown_libname_2. PRESS KEYPAD "+" TO EXPAND]
; ---------------------------------------------------------------------------
; [00000003 BYTES: COLLAPSED CHUNK OF FUNCTION __amalloc. PRESS	KEYPAD "+" TO EXPAND]
; [000000E3 BYTES: COLLAPSED FUNCTION __amalloc. PRESS KEYPAD "+" TO EXPAND]
; [0000003A BYTES: COLLAPSED FUNCTION __amexpand. PRESS	KEYPAD "+" TO EXPAND]
; [00000022 BYTES: COLLAPSED FUNCTION __amlink.	PRESS KEYPAD "+" TO EXPAND]
; [0000001F BYTES: COLLAPSED FUNCTION __amallocbrk. PRESS KEYPAD "+" TO	EXPAND]
		align 2
; [0000006E BYTES: COLLAPSED FUNCTION _brkctl. PRESS KEYPAD "+"	TO EXPAND]
; [00000056 BYTES: COLLAPSED FUNCTION sub_1190A. PRESS KEYPAD "+" TO EXPAND]
; [0000003F BYTES: COLLAPSED FUNCTION _strcat. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000032 BYTES: COLLAPSED FUNCTION _strcpy. PRESS KEYPAD "+"	TO EXPAND]
; [0000001B BYTES: COLLAPSED FUNCTION _strlen. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000028 BYTES: COLLAPSED FUNCTION _strncpy.	PRESS KEYPAD "+" TO EXPAND]
; [0000003A BYTES: COLLAPSED FUNCTION _strncmp.	PRESS KEYPAD "+" TO EXPAND]
; [0000000A BYTES: COLLAPSED FUNCTION _ultoa. PRESS KEYPAD "+" TO EXPAND]
; [00000019 BYTES: COLLAPSED FUNCTION _toupper.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000056 BYTES: COLLAPSED FUNCTION _getenv. PRESS KEYPAD "+"	TO EXPAND]
; [00000023 BYTES: COLLAPSED FUNCTION _isatty. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000056 BYTES: COLLAPSED FUNCTION _sprintf.	PRESS KEYPAD "+" TO EXPAND]
; [0000002A BYTES: COLLAPSED FUNCTION _strchr. PRESS KEYPAD "+"	TO EXPAND]
; [0000002B BYTES: COLLAPSED FUNCTION _strrchr.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000022 BYTES: COLLAPSED FUNCTION _strupr. PRESS KEYPAD "+"	TO EXPAND]
; ---------------------------------------------------------------------------
; [0000005F BYTES: COLLAPSED CHUNK OF FUNCTION _ultoa. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000235 BYTES: COLLAPSED FUNCTION __cenvarg. PRESS KEYPAD "+" TO EXPAND]
		align 2
word_11E52	dw 0			; DATA XREF: __dospawn+5Cw
					; __dospawn+AFr
word_11E54	dw 0			; DATA XREF: __dospawn+57w
					; __dospawn+AAr
word_11E56	dw 0			; DATA XREF: __dospawn+66w
					; __dospawn+C4r
word_11E58	dw 0			; DATA XREF: __dospawn+6Ew
					; __dospawn+BCr
word_11E5A	dw 0			; DATA XREF: __dospawn+73w
					; __dospawn+B7r
; [000000E1 BYTES: COLLAPSED FUNCTION __dospawn. PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000151 BYTES: COLLAPSED FUNCTION _spawnve.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [000000F2 BYTES: COLLAPSED FUNCTION _spawnvpe. PRESS KEYPAD "+" TO EXPAND]
; [0000008F BYTES: COLLAPSED FUNCTION _system. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [00000014 BYTES: COLLAPSED FUNCTION __execload. PRESS	KEYPAD "+" TO EXPAND]
; [0000001F BYTES: COLLAPSED FUNCTION _access. PRESS KEYPAD "+"	TO EXPAND]
		align 2
; [000000A3 BYTES: COLLAPSED FUNCTION __aNldiv.	PRESS KEYPAD "+" TO EXPAND]
		align 2
; [00000034 BYTES: COLLAPSED FUNCTION __aNlmul.	PRESS KEYPAD "+" TO EXPAND]

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1231E	proc near		; CODE XREF: ParseCmdLine+76p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	es
		push	di
		push	si
		mov	ax, ds
		mov	es, ax
		assume es:dseg
		mov	si, [bp+arg_0]
		mov	di, si

loc_1232D:				; CODE XREF: sub_1231E+16j
		lodsb
		or	al, al
		jz	short loc_12336
		cmp	al, ' '
		jz	short loc_1232D

loc_12336:				; CODE XREF: sub_1231E+12j
					; sub_1231E+1Ej
		stosb
		or	al, al
		jz	short loc_1233E
		lodsb
		jmp	short loc_12336
; ---------------------------------------------------------------------------

loc_1233E:				; CODE XREF: sub_1231E+1Bj
		mov	ax, [bp+arg_0]
		pop	si
		pop	di
		pop	es
		assume es:nothing
		pop	bp
		retn
sub_1231E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

fopen		proc near		; CODE XREF: LoadFile+45p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	ax, [bp+arg_2]
		mov	ah, 3Dh
		mov	dx, [bp+arg_0]
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read, 1 -	write, 2 - read	& write
		jnb	short loc_12360
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_12360:				; CODE XREF: fopen+13j
		pop	bp
		retn
fopen		endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	ah, 3Ch
		mov	cx, 20h
		mov	dx, [bp+4]
		int	21h		; DOS -	2+ - CREATE A FILE WITH	HANDLE (CREAT)
					; CX = attributes for file
					; DS:DX	-> ASCIZ filename (may include drive and path)
		jnb	short loc_1237C
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_1237C:				; CODE XREF: seg000:2375j
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; size_t __cdecl fread(void *, size_t, size_t, FILE *)
_fread		proc near		; CODE XREF: LoadFile+62p

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	bx, [bp+arg_0]
		mov	cx, [bp+arg_2]
		mov	ah, 3Fh
		push	ds
		lds	dx, [bp+arg_4]
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		pop	ds
		jnb	short loc_1239D
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_1239D:				; CODE XREF: _fread+18j
		pop	bp
		retn
_fread		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; size_t __cdecl fwrite(const void *, size_t, size_t, FILE *)
_fwrite		proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	bx, [bp+arg_0]
		mov	cx, [bp+arg_2]
		mov	ah, 40h
		push	ds
		lds	dx, [bp+arg_4]
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	ds
		jnb	short loc_123BE
		mov	FileNameToPlay,	ax
		sub	ax, ax

loc_123BE:				; CODE XREF: _fwrite+18j
		pop	bp
		retn
_fwrite		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl fclose(FILE *)
_fclose		proc near		; CODE XREF: LoadFile+82p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	bx, [bp+arg_0]
		mov	ah, 3Eh
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		jnb	short loc_123D5
		mov	FileNameToPlay,	ax

loc_123D5:				; CODE XREF: _fclose+10j
		pop	bp
		retn
_fclose		endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================


; int kbhit(void)
_kbhit		proc near		; CODE XREF: PlayFile:loc_1030Ap
		mov	ah, 1
		int	16h		; KEYBOARD - CHECK BUFFER, DO NOT CLEAR
					; Return: ZF clear if character	in buffer
					; AH = scan code, AL = character
					; ZF set if no character in buffer
		jnz	short locret_123E0
		sub	ax, ax

locret_123E0:				; CODE XREF: _kbhit+4j
		retn
_kbhit		endp


; =============== S U B	R O U T	I N E =======================================


; int getch(void)
_getch		proc near		; CODE XREF: PlayFile+A3p
		sub	ah, ah
		int	16h		; KEYBOARD - READ CHAR FROM BUFFER, WAIT IF EMPTY
					; Return: AH = scan code, AL = character
		retn
_getch		endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ah, 48h
		mov	bx, [bp+4]
		mov	cx, 100h
		add	bx, 0Fh
		jb	short loc_12400
		shr	bx, 1
		shr	bx, 1
		shr	bx, 1
		shr	bx, 1
		mov	cx, bx

loc_12400:				; CODE XREF: seg000:23F4j
		mov	bx, cx
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jnb	short loc_12408
		sub	ax, ax

loc_12408:				; CODE XREF: seg000:2404j
		mov	dx, ax
		sub	ax, ax
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

malloc_seg	proc near		; CODE XREF: LoadFile+28p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	ah, 48h
		mov	bx, [bp+arg_0]
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jnb	short loc_1241C
		sub	ax, ax

loc_1241C:				; CODE XREF: malloc_seg+Aj
		mov	dx, ax
		sub	ax, ax
		pop	bp
		retn
malloc_seg	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __cdecl free(void *)
_free		proc near		; CODE XREF: _main+57p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	es
		mov	ah, 49h
		mov	es, [bp+arg_0]
		int	21h		; DOS -	2+ - FREE MEMORY
					; ES = segment address of area to be freed
		pop	es
		pop	bp
		retn
_free		endp

; ---------------------------------------------------------------------------
		mov	ah, 48h
		mov	bx, 0FFFFh
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		mov	ax, bx
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

FindFile	proc near		; CODE XREF: _main+2Fp	GetFileSize+22p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	FileNameToPlay,	0
		mov	ah, 4Eh
		mov	cx, [bp+arg_2]
		mov	dx, [bp+arg_0]
		int	21h		; DOS -	2+ - FIND FIRST	ASCIZ (FINDFIRST)
					; CX = search attributes
					; DS:DX	-> ASCIZ filespec
					; (drive, path,	and wildcards allowed)
		mov	cx, ax
		mov	ax, 1
		jnb	short loc_1245A
		mov	FileNameToPlay,	cx
		sub	ax, ax

loc_1245A:				; CODE XREF: FindFile+18j
		pop	bp
		retn
FindFile	endp


; =============== S U B	R O U T	I N E =======================================


_tell_last	proc near		; CODE XREF: PlayFile+D0p
					; GetFileSize+6p
		push	es
		mov	ah, 2Fh
		int	21h		; DOS -	GET DISK TRANSFER AREA ADDRESS
					; Return: ES:BX	-> DTA
		mov	dx, es
		mov	ax, bx
		pop	es
		retn
_tell_last	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_seek_last	proc near		; CODE XREF: PlayFile+10Dp
					; GetFileSize+11p ...

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	ds
		lds	dx, [bp+arg_0]
		mov	ah, 1Ah
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		pop	ds
		pop	bp
		retn
_seek_last	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl AppendFileExt(char *)
AppendFileExt	proc near		; CODE XREF: ParseCmdLine+F2p

var_2		= dword	ptr -2
arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	di
		push	si
		mov	ax, '\'
		push	ax
		push	word ptr [bp+arg_0] ; char *
		call	_strrchr
		add	sp, 4
		mov	word ptr [bp+var_2], ax
		or	ax, ax
		jnz	short loc_12498
		mov	ax, word ptr [bp+arg_0]
		mov	word ptr [bp+var_2], ax

loc_12498:				; CODE XREF: AppendFileExt+1Aj
		mov	ax, '.'
		push	ax
		push	word ptr [bp+var_2] ; char *
		call	_strchr
		add	sp, 4
		mov	word ptr [bp+var_2], ax
		or	ax, ax
		jz	short loc_124B4
		mov	bx, ax
		mov	byte ptr [bx], 0
		jmp	short loc_124C3
; ---------------------------------------------------------------------------
		align 2

loc_124B4:				; CODE XREF: AppendFileExt+34j
		sub	ax, ax
		push	ax
		push	word ptr [bp+arg_0] ; char *
		call	_strchr
		add	sp, 4
		mov	word ptr [bp+var_2], ax

loc_124C3:				; CODE XREF: AppendFileExt+3Bj
		push	ds
		pop	es
		assume es:dseg
		mov	di, word ptr [bp+arg_0+2]
		mov	si, word ptr [bp+var_2]
		mov	cx, 0FFFFh
		xor	ax, ax
		repne scasb
		not	cx
		sub	di, cx
		xchg	di, si
		shr	cx, 1
		repne movsw
		adc	cx, cx
		repne movsb
		mov	ax, word ptr [bp+arg_0]
		pop	si
		pop	di
		mov	sp, bp
		pop	bp
		retn
AppendFileExt	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================


GetFileSize	proc near		; CODE XREF: LoadFile+Bp
		push	bp
		sub	sp, 31h
		mov	bp, sp
		call	_tell_last
		mov	[bp+2Ch], ax
		mov	[bp+2Eh], dx
		push	ss
		push	bp		; FILE *
		call	_seek_last
		add	sp, 4
		sub	ax, ax
		mov	[bp+1Ah], ax
		mov	[bp+1Ch], ax
		push	word ptr [bp+35h]
		call	FindFile
		add	sp, 2
		push	word ptr [bp+2Eh]
		push	word ptr [bp+2Ch] ; FILE *
		call	_seek_last
		add	sp, 4
		mov	ax, [bp+1Ah]
		mov	dx, [bp+1Ch]
		add	sp, 31h
		pop	bp
		retn
GetFileSize	endp

; ---------------------------------------------------------------------------
		align 2

; =============== S U B	R O U T	I N E =======================================


FindFMDRV	proc near		; CODE XREF: _main+9p
		push	es
		mov	ax, 3580h

loc_1252E:				; CODE XREF: FindFMDRV+4Cj
		push	ax
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		pop	ax
		mov	bx, 103h	; SBFMDRV puts its signature at	0103h
		cmp	word ptr es:[bx], 'MF' ; check for "FMDRV"
		jnz	short loc_12572
		cmp	word ptr es:[bx+2], 'RD'
		jnz	short loc_12572
		cmp	word ptr es:[bx+4], 'V'
		jnz	short loc_12572
		sub	ah, ah
		call	$+3		; save 2550h onto stack
		pop	bx		; get that value back into BX
		add	bx, 31h		; BX = 2581h (CallFMDRV	+ 01h)
		mov	cs:[bx], al	; write	interrupt ID into that instruction
		push	ax
		mov	dx, seg	dseg
		mov	ax, offset fmDrvMarker
		mov	bx, 1
		call	CallFMDRV	; call fnSetMarkerPtr
		mov	word ptr cs:prevMarkerPtr, ax ;	store previous marker pointer
		mov	word ptr cs:prevMarkerPtr+2, dx
		pop	ax
		jmp	short loc_1257A
; ---------------------------------------------------------------------------
		align 2

loc_12572:				; CODE XREF: FindFMDRV+10j
					; FindFMDRV+18j ...
		inc	al
		cmp	al, 0C0h
		jb	short loc_1252E
		sub	ax, ax

loc_1257A:				; CODE XREF: FindFMDRV+45j
		pop	es
		assume es:nothing
		retn
FindFMDRV	endp

; ---------------------------------------------------------------------------
prevMarkerPtr	dd 0			; DATA XREF: FindFMDRV+3Bw
					; UninitFMDRV+Br ...

; =============== S U B	R O U T	I N E =======================================


CallFMDRV	proc near		; CODE XREF: FindFMDRV+38p
					; cmfSetMarkerPtr+Cp ...
		int	80h		; call SBFMDRV API
		retn
CallFMDRV	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfSetMarkerPtr	proc near		; CODE XREF: PlayFile+Bp PlayFile+131p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	bx, 1
		call	CallFMDRV	; call fnSetMarkerPtr
		pop	bp
		retn
cmfSetMarkerPtr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfStartPlaying	proc near		; CODE XREF: PlayFile+6Bp

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	bx, 6
		call	CallFMDRV	; call fnStartPlaying
		pop	bp
		retn
cmfStartPlaying	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfSetTimbrePtr	proc near		; CODE XREF: PlayFile+38p

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	cx, [bp+arg_4]
		mov	bx, 2
		call	CallFMDRV	; call fnSetTimbrePtr
		pop	bp
		retn
cmfSetTimbrePtr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfResetPlayer	proc near		; CODE XREF: PlayFile+17p
		push	bp
		mov	bp, sp
		mov	bx, 8
		call	CallFMDRV	; call fnResetPlayer
		pop	bp
		retn
cmfResetPlayer	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ax, [bp+4]
		mov	bx, 3
		call	CallFMDRV	; call fnSetChainedPeriod
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

cmfSetPlayerPeriod proc	near		; CODE XREF: PlayFile+54p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_0]
		mov	bx, 4
		call	CallFMDRV	; call fnSetPlayerPeriod
		pop	bp
		retn
cmfSetPlayerPeriod endp


; =============== S U B	R O U T	I N E =======================================


cmfStopPlaying	proc near		; CODE XREF: PlayFile+C4p
		mov	bx, 7
		call	CallFMDRV	; call fnStopPlaying
		retn
cmfStopPlaying	endp

; ---------------------------------------------------------------------------
		mov	bx, 0
		call	CallFMDRV	; call fnGetVersion
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ax, [bp+4]
		mov	bx, 5
		call	CallFMDRV	; call fnSetTranspose
		pop	bp
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	bx, 9
		call	CallFMDRV	; call fnPausePlaying
		pop	bp
		retn
; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	bx, 0Ah
		call	CallFMDRV	; call fnContinuePlaying
		pop	bp
		retn
; ---------------------------------------------------------------------------
		pushf
		sub	ax, ax
		cli
		cmp	byte ptr fmDrvMarker, 0
		jz	short loc_12623
		mov	al, 0FFh
		xchg	al, byte ptr fmDrvMarker

loc_12623:				; CODE XREF: seg000:261Bj
		popf
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

UninitFMDRV	proc near		; CODE XREF: _main:loc_101A6p
		push	bp
		mov	bp, sp
		mov	bx, 1
		mov	dx, word ptr cs:prevMarkerPtr+2	; restore original marker pointer
		mov	ax, word ptr cs:prevMarkerPtr
		call	CallFMDRV	; call fnSetMarkerPtr
		pop	bp
		retn
UninitFMDRV	endp

; ---------------------------------------------------------------------------
		align 8
seg000		ends

; ===========================================================================

; Segment type:	Pure data
dseg		segment	para public 'DATA' use16
		assume cs:dseg
unk_12640	db    0			; DATA XREF: ParseCmdLine:loc_100FAo
					; ParseCmdLine+EEo ...
		db    0
word_12642	dw 0			; DATA XREF: start+51w
		align 8
aMsRunTimeLibra	db 'MS Run-Time Library - Copyright (c) 1987, Microsoft Corp'
		db  1Eh
		db    0
QuietMode	db    0			; DATA XREF: ParseCmdLine:loc_100A6w
					; ShowSplashr ...
		db    0
ErrorStrList	dw offset aSbfmdrvNotInst ; DATA XREF: ShowError+1Er
					; "SBFMDRV not installed"
		dw offset aCreativeMusi_0 ; "Creative Music File not specified"
		dw offset aSDoesNotExist ; "\"%s\" does	not exist"
		dw offset aInvalidExecuti ; "invalid execution command"
		dw offset aOpenFileError ; "open file error"
		dw offset aEqualSignMissi ; "equal sign	missing"
unk_12690	db    0			; DATA XREF: start+4Bw	__myalloc+8r ...
		db    0
unk_12692	db    0			; DATA XREF: start+3Fw
		db    0
off_12694	dw offset aReturnedToPlay+0Bh ;	DATA XREF: start+9Dw start+AFr
off_12696	dd unk_12640		; DATA XREF: start+3Aw	__myalloc+2r ...
		db    0
		db    0
unk_1269C	db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_126E6	db  56h	; V		; DATA XREF: _brkctl:loc_118BBr
					; _brkctl+61w
		db    0
		db  3Bh	; ;
		db  43h	; C
		db  5Fh	; _
		db  46h	; F
		db  49h	; I
		db  4Ch	; L
		db  45h	; E
		db  5Fh	; _
		db  49h	; I
		db  4Eh	; N
		db  46h	; F
		db  4Fh	; O
		db    0
unk_126F5	db    0			; DATA XREF: seg000:04A2w sub_105B6+Er
		db    0
unk_126F7	db    0			; DATA XREF: seg000:04A6w
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_12701	db    0			; DATA XREF: sub_10914+26w
					; __cenvarg+8Bw ...
		db    0
		db    0
		db    0
		db    0
		db    0
unk_12707	db    0			; DATA XREF: start+5Fw	seg000:04BCr ...
		db    0
unk_12709	db    0			; DATA XREF: __setargv+7r sub_10914+7r ...
		db    0
		db    0
unk_1270C	db    0			; DATA XREF: sub_10914w __cenvarg+91w	...
		db    0
unk_1270E	db  14h			; DATA XREF: _lseek+9r	_write+9r ...
		db    0
		db  81h	; Å
		db  81h	; Å
		db  81h	; Å
		db    1
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_12724	db    0			; DATA XREF: start+8Ar	__setargv+BEw
		db    0
unk_12726	db    0			; DATA XREF: start+86r	__setargv+D0w
		db    0
unk_12728	db    0			; DATA XREF: start+82r	__setenvp+3Cw ...
		db    0
off_1272A	dd unk_1272E		; DATA XREF: __setargv+29w
					; __setargv+DEr ...
unk_1272E	db  43h	; C		; DATA XREF: dseg:off_1272Ao
		db    0
unk_12730	db    0			; DATA XREF: __dospawn+90w
					; __dospawn+CEw
		db    0
unk_12732	db    0			; DATA XREF: sub_105B6+18r
unk_12733	db    0			; DATA XREF: sub_105B6+20r
unk_12734	db    0			; DATA XREF: sub_105B6+23r
		db    0
		db    0
		db    0
unk_12738	db    0			; DATA XREF: __FF_MSGBANNER+Ar
					; __FF_MSGBANNER+11r
		db    0
unk_1273A	db  90h	; ê		; DATA XREF: __chkstk+7r
					; _stackavail+1r
		db  0Dh
unk_1273C	db    0			; DATA XREF: __setargvw __setargv+18Ar
		db    0
		db    0
		db  16h
		db    2
		db    2
		db  18h
		db  0Dh
		db    9
		db  0Ch
		db  0Ch
		db  0Ch
		db    7
		db    8
		db  16h
		db  16h
		db 0FFh
		db  12h
		db  0Dh
		db  12h
		db    2
		db 0FFh
unk_12752	db    0			; DATA XREF: __flsbuf:loc_10A87w
					; __stbuf+8w
		db    0
		db  82h	; Ç
		db    9
		db    0
		db    0
		db  82h	; Ç
		db    9
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
unk_12760	db    0			; DATA XREF: __stbuf+79r
		db    0
		db    2
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    6
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  84h	; Ñ
		db    3
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    2
		db    4
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		db    0
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_1286C	db 0ACh	; ¨		; DATA XREF: _flushall:loc_10966r
		db    1
		db  28h	; (
		db  6Eh	; n
		db  75h	; u
		db  6Ch	; l
		db  6Ch	; l
		db  29h	; )
		db    0
		db  28h	; (
		db  6Eh	; n
		db  75h	; u
		db  6Ch	; l
		db  6Ch	; l
		db  29h	; )
		db    0
		db  2Bh	; +
		db  2Dh	; -
		db  20h
		db  23h	; #
		db    0
		db    0
unk_12882	db    0			; DATA XREF: unknown_libname_2+1Fw
		db    0
unk_12884	db    0			; DATA XREF: unknown_libname_2+22w
		db    0
		db    0
		db    0
unk_12888	db    0			; DATA XREF: unknown_libname_2+32w
		db    0
		db    0
		db    0
unk_1288C	db    0			; DATA XREF: __amalloc+A2r
		db    0
		db    0
		db    0
unk_12890	db    0			; DATA XREF: __amalloc+4Fw
					; __amalloc+D6w
		db    0
unk_12892	db    0			; DATA XREF: __amexpand:loc_11830r
					; __cenvarg:loc_11CBCr	...
		db  20h
		db    0
		db    0
unk_12896	db    0			; DATA XREF: __amalloc:loc_11795w
					; __amalloc:loc_117D0w
		db    0
unk_12898	db  26h	; &		; DATA XREF: fprint+2Br
		db    6
unk_1289A	db  26h	; &		; DATA XREF: seg000:1222r
		db    6
		db  26h	; &
		db    6
unk_1289E	db  26h	; &		; DATA XREF: seg000:123Br
		db    6
unk_128A0	db  26h	; &		; DATA XREF: seg000:1259r
		db    6
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_128A9	db  20h			; DATA XREF: _toupper+6r
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  20h
		db  48h	; H
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  84h	; Ñ
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  81h	; Å
		db  81h	; Å
		db  81h	; Å
		db  81h	; Å
		db  81h	; Å
		db  81h	; Å
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  10h
		db  82h	; Ç
		db  82h	; Ç
		db  82h	; Ç
		db  82h	; Ç
		db  82h	; Ç
		db  82h	; Ç
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db  10h
		db  10h
		db  10h
		db  10h
		db  20h
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
aC_file_info	db ';C_FILE_INFO',0
		db    0
unk_129B8	db    0			; DATA XREF: __dospawn+29w
		db    0
unk_129BA	db    0			; DATA XREF: __dospawn+2Fw
					; __dospawn+38r
		db    0
unk_129BC	db    0			; DATA XREF: __dospawn+32w
		db    0
		dd 12680346h
		dd 12680356h
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
a_com		db '.com',0
a_exe		db '.exe',0
aPath		db 'PATH',0
		db  5Ch	; \
		db    0
		db    0
aComspec_0	db 'COMSPEC',0
aC		db '/c',0
aCommand_com	db 'command.com',0
		db    0
fmDrvMarker	db    0			; DATA XREF: PlayFile+6o
					; PlayFile:loc_10381r ...
		db    0
		db    0
		db    0
unk_12A14	db    0			; DATA XREF: seg000:04CDr seg000:04E3r ...
		db    0
unk_12A16	db    0			; DATA XREF: seg000:04B6r sub_105B6r
		db    0
unk_12A18	db    0			; DATA XREF: seg000:04C5r
		db    0
		db    0
		db    0
unk_12A1C	db    0			; DATA XREF: seg000:loc_104D9r
		db    0
		db    0
		db    0
		db  42h	; B
		db    9
unk_12A22	db    0			; DATA XREF: __execloadr
		db    0
a_cmf		db '.CMF',0             ; DATA XREF: ParseCmdLine:loc_100FAo
		align 2
aCreativeMusicF	db 'Creative Music File Player  Version 1.01',0Ah,0
					; DATA XREF: ShowSplash+7o
aCopyrightCCrea	db 'Copyright (c) Creative Labs, Inc., 1990.  All rights reserved.',0Ah,0
					; DATA XREF: ShowSplash+11o
aCopyrightCCr_0	db 'Copyright (c) Creative Technology Pte Ltd, 1990.  All rights rese'
					; DATA XREF: ShowSplash+1Bo
		db 'rved.',0Ah
		db 0Ah,0
		align 2
aUsagePlaycmfMu	db 'Usage: PLAYCMF music-filename  [/Q] [/S="execution command"]',0Ah,0
					; DATA XREF: _main+83o
aQSetQuietModeS	db 0Ah			; DATA XREF: _main+8Do
		db 9,'/Q :    set quiet mode',0Ah
		db 9,'/S :    execute the execution command specified.',0Ah,0
aReturnToPlaycm	db 'Return to PLAYCMF',0Ah,0 ; DATA XREF: PlayFile:loc_102FDo
		align 2
aComspec	db 'COMSPEC',0          ; DATA XREF: PlayFile+D9o
aTypeExitToRetu	db 'Type "EXIT" to return to PLAYCMF',0Ah,0 ; DATA XREF: PlayFile+EAo
aReturnedToPlay	db 'Returned to PLAYCMF.',0Ah,0 ; DATA XREF: PlayFile+FDo
					; dseg:off_12694o
aMusicStopped_	db 'Music stopped.',0   ; DATA XREF: PlayFile+121o
		align 2
aSbfmdrvNotInst	db 'SBFMDRV not installed',0 ; DATA XREF: dseg:ErrorStrListo
aCreativeMusi_0	db 'Creative Music File not specified',0 ; DATA XREF: dseg:0046o
aSDoesNotExist	db '"%s" does not exist',0 ; DATA XREF: dseg:0048o
aInvalidExecuti	db 'invalid execution command',0 ; DATA XREF: dseg:004Ao
aOpenFileError	db 'open file error',0  ; DATA XREF: dseg:004Co
aEqualSignMissi	db 'equal sign missing',0 ; DATA XREF: dseg:004Eo
		align 2
aError6202d	db 'Error 62%02d: ',0   ; DATA XREF: ShowError+9o
		align 2
aS		db '%s',0Ah,0           ; DATA XREF: ShowError+30o
aNmsg		db '<<NMSG>>',0
		align 2
aR6000StackOver	db 'R6000',0Dh,0Ah
		db '- stack overflow',0Dh,0Ah,0
		db    3
		db    0
aR6003IntegerDi	db 'R6003',0Dh,0Ah
		db '- integer divide by 0',0Dh,0Ah,0
		db    9
		db    0
aR6009NotEnough	db 'R6009',0Dh,0Ah
		db '- not enough space for environment',0Dh,0Ah,0
		db 0FCh	; ¸
		db    0
		db  0Dh
		db  0Ah
		db    0
		db 0FFh
		db    0
aRunTimeError	db 'run-time error ',0
		db    2
		db    0
aR6002FloatingP	db 'R6002',0Dh,0Ah
		db '- floating point not loaded',0Dh,0Ah,0
		db    1
		db    0
aR6001NullPoint	db 'R6001',0Dh,0Ah
		db '- null pointer assignment',0Dh,0Ah,0
		db 0FFh
		db 0FFh
		db 0FFh
		db 0FFh
unk_12D44	db 0FFh			; DATA XREF: __stbuf+8Aw __ftbuf+61r
		db 0FFh
unk_12D46	db 0FFh			; DATA XREF: __output+52w
					; __output:loc_10EA2w
		db 0FFh
unk_12D48	db 0FFh			; DATA XREF: __output+4Fw __output+79w ...
		db 0FFh
unk_12D4A	db 0FFh			; DATA XREF: __output+4Cw __output+D7w ...
		db 0FFh
unk_12D4C	db 0FFh			; DATA XREF: __output+46w
					; __output:loc_10E84w ...
		db 0FFh
unk_12D4E	db 0FFh			; DATA XREF: __output+27w
					; __output+18Cr ...
		db 0FFh
unk_12D50	db    ?	;		; DATA XREF: __output+21w
					; __output:loc_10F86r ...
		db    ?	;
unk_12D52	db    ?	;		; DATA XREF: __output+5Bw __output+68w ...
		db    ?	;
unk_12D54	db    ?	;		; DATA XREF: __output+18w
					; __output:loc_10E70r ...
		db    ?	;
unk_12D56	db    ?	;		; DATA XREF: __output+12w iprint+79r ...
		db    ?	;
unk_12D58	db    ?	;		; DATA XREF: __output+BFr __output+CAr ...
		db    ?	;
unk_12D5A	db    ?	;		; DATA XREF: iprint:loc_11024w
					; seg000:1247w	...
		db    ?	;
unk_12D5C	db    ?	;		; DATA XREF: __output+58w __output+9Fw ...
		db    ?	;
unk_12D5E	db    ?	;		; DATA XREF: __output+43w
					; __output:loc_10E50w ...
		db    ?	;
unk_12D60	db    ?	;		; DATA XREF: __output+49w
					; __output:loc_10E02w ...
		db    ?	;
unk_12D62	db    ?	;		; DATA XREF: __output+40w __output+75w ...
		db    ?	;
unk_12D64	db    ?	;		; DATA XREF: __output:loc_10D22w
					; __output+E9r	...
		db    ?	;
unk_12D66	db    ?	;		; DATA XREF: __output+55w
					; __output:loc_10D7Ew ...
		db    ?	;
unk_12D68	db    ?	;		; DATA XREF: __output+1Ew
					; __output+25Dr ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
curFileName	db    ?	;		; DATA XREF: ParseCmdLine+A2o
					; ParseCmdLine:loc_100E1r ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
unk_12DC2	db    ?	;		; DATA XREF: __flsbuf+108w
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
FileDataPtr	dd ?			; DATA XREF: _main:loc_10182r
					; LoadFile+34w	...
FileNameToPlay	dw ?			; DATA XREF: fopen+3w fopen+15w ...
ExecCommand	db    ?	;		; DATA XREF: ParseCmdLine+55o
					; ParseCmdLine+7Cr ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
dseg		ends

; ===========================================================================

; Segment type:	Uninitialized
seg002		segment	byte stack 'STACK' use16
		assume cs:seg002
		assume es:nothing, ss:nothing, ds:dseg,	fs:nothing, gs:nothing
byte_132D0	db 800h	dup(?)
seg002		ends


		end start
